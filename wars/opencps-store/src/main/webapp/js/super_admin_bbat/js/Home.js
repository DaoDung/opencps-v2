(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Home"],{5996:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-breadcrumbs",[s("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,function(e){return s("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])})],2),s("v-card",{staticClass:"px-2 mx-1",staticStyle:{overflow:"hidden"}},[s("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[s("v-toolbar-title",{staticClass:"ml-2"},[s("v-btn",{staticClass:"mx-0",attrs:{loading:t.importLoading,disabled:t.importLoading,color:"blue darken-3",dark:""},nativeOn:{click:function(e){t.doImportData()}}},[t._v("\n          Upload\n          "),s("v-icon",{attrs:{right:"",dark:""}},[t._v("cloud_upload")])],1)],1),s("v-spacer"),s("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),s("v-btn",{attrs:{dark:"",icon:""}},[s("v-icon",[t._v("refresh")])],1)],1),s("div",{staticStyle:{overflow:"hidden","overflow-x":"auto"}},[s("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"importData",attrs:{type:"file",name:"importData",accept:t.accept},on:{change:t.onFilePicked}}),t.importMessage?s("v-alert",{attrs:{value:!0,color:"success",icon:"check_circle",outline:""}},[t._v("\n        Gửi yêu cầu Import dữ liệu thành công.\n      ")]):t._e(),t.importMessage?s("v-alert",{attrs:{value:!0,color:"success",outline:""}},[t._v("\n        "+t._s(t.responseXMLSuccess)+"\n      ")]):t._e()],1)],1)],1)},o=[],a=s("bc3a"),i=s.n(a),n={props:["tableName"],data:function(){return{responseXMLSuccess:"",importMessage:!1,importLoading:!1,showFilter:!1,accept:"text/xml,application/zip",breadCrumbsitems:[{text:"Import",disabled:!1},{text:"XML/ZIP",disabled:!1}]}},methods:{doImportData:function(){this.importLoading=!0,this.importMessage=!1,this.$refs.importData.click()},onFilePicked:function(t){var e=this,s=t.target.files||t.dataTransfer.files;if(s&&s[0]){var r=new FormData;r.append("file",s[0]),i()({method:"post",url:"/o/rest/v2/dossiers/import/files",data:r,config:{headers:{"Content-Type":"multipart/form-data"}}}).then(function(t){console.log(t),e.responseXMLSuccess=t.data,e.importLoading=!1,e.importMessage=!0}).catch(function(t){console.log(t),e.importLoading=!1,e.importMessage=!1})}}}},c=n,l=s("2877"),u=Object(l["a"])(c,r,o,!1,null,null,null);u.options.__file="import.vue";e["default"]=u.exports},a271:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("bbat-table-editor",{attrs:{"table-name":t.tableName,id:t.id}})],1)},o=[],a=s("2af9"),i={props:["tableName","id"],components:{BbatTableEditor:a["b"]},data:function(){return{}}},n=i,c=s("2877"),l=Object(c["a"])(n,r,o,!1,null,null,null);l.options.__file="TableEditorForm.vue";e["default"]=l.exports},eeb9:function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-breadcrumbs",[s("v-icon",{attrs:{slot:"divider"},slot:"divider"},[t._v("chevron_right")]),t._l(t.breadCrumbsitems,function(e){return s("v-breadcrumbs-item",{key:e.text,attrs:{disabled:e.disabled}},[t._v("\n      "+t._s(e.text)+"\n    ")])}),s("a",{staticStyle:{"text-decoration":"none","font-weight":"bold"},attrs:{href:"javascript:;"}},[t._v("opencps_serviceprocess")])],2),s("v-card",{staticClass:"px-2 mx-1"},[s("v-toolbar",{attrs:{color:"blue darken-3",dark:"",height:"48"}},[s("v-btn",{attrs:{dark:"",icon:""}},[s("v-icon",[t._v("edit")])],1),s("v-toolbar-title",{staticClass:"ml-0"},[t._v("\n        "+t._s(t.currentProcessName)+"\n      ")]),s("v-spacer"),s("v-icon",{attrs:{dark:""}},[t._v("more_vert")]),s("v-btn",{attrs:{dark:"",icon:""},nativeOn:{click:function(e){return t.backToList(e)}}},[s("v-icon",[t._v("undo")])],1)],1),s("div",{staticClass:"grid-list"},[s("v-tabs",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[s("v-tabs-slider",{attrs:{color:"blue"}}),s("v-tab",{key:"tab-1",attrs:{href:"#tab-1",ripple:""},on:{click:function(e){t.changeTab("process")}}},[t._v("\n          Thông tin quy trình\n        ")]),s("v-tab",{key:"tab-2",attrs:{disabled:!(Number(t.id)>0),href:"#tab-2",ripple:""},on:{click:function(e){t.changeTab("step")}}},[t._v("\n          Bước\n        ")]),s("v-tab",{key:"tab-3",attrs:{disabled:!(Number(t.id)>0),href:"#tab-3",ripple:""},on:{click:function(e){t.changeTab("action")}}},[t._v("\n          Thao tác\n        ")]),s("v-tab-item",{key:"tab-1",staticClass:"pt-3",attrs:{value:"tab-1",transition:"fade-transition","reverse-transition":"fade-transition"}},[s("v-card",{staticStyle:{"margin-bottom":"40px"}},[s("v-form",{ref:"formAddProcess",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddProcess,callback:function(e){t.validAddProcess=e},expression:"validAddProcess"}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Số hiệu quy trình",box:"",rules:[t.rules.required],required:""},model:{value:t.currentProcess.processNo,callback:function(e){t.$set(t.currentProcess,"processNo",e)},expression:"currentProcess.processNo"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Tên quy trình",box:"",rules:[t.rules.required],required:""},model:{value:t.currentProcess.processName,callback:function(e){t.$set(t.currentProcess,"processName",e)},expression:"currentProcess.processName"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Mô tả",box:""},model:{value:t.currentProcess.description,callback:function(e){t.$set(t.currentProcess,"description",e)},expression:"currentProcess.description"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm7:""}},[s("v-text-field",{attrs:{label:"Thời gian xử lý",box:"",rules:[t.rules.required],required:""},model:{value:t.currentProcess.durationCount,callback:function(e){t.$set(t.currentProcess,"durationCount",e)},expression:"currentProcess.durationCount"}})],1),s("v-flex",{staticClass:"pl-2 pr-0",attrs:{xs12:"",sm5:""}},[s("v-select",{attrs:{box:"",items:[{text:"Tính theo ngày",value:0},{text:"Tính theo giờ",value:1}],"item-text":"text","item-value":"value"},model:{value:t.currentProcess.durationUnit,callback:function(e){t.$set(t.currentProcess,"durationUnit",e)},expression:"currentProcess.durationUnit"}})],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm4:""}},[s("v-autocomplete",{attrs:{box:"",label:"Vai trò xử lý",items:t.jobposList,"item-text":"title","item-value":"jobPosId","hide-selected":!0,"return-object":"",clearable:""},model:{value:t.processRoleId,callback:function(e){t.processRoleId=e},expression:"processRoleId"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm3:""}},[s("v-select",{attrs:{box:"",items:[{text:"Theo dõi",value:0},{text:"Thực hiện",value:1}],"item-text":"text","item-value":"value",disabled:!t.processRoleId,"return-object":"",cleable:""},model:{value:t.processModerator,callback:function(e){t.processModerator=e},expression:"processModerator"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm3:""}},[s("v-text-field",{attrs:{label:"Điều kiện phân công xử lý",disabled:!t.processRoleId,box:""},model:{value:t.processCondition,callback:function(e){t.processCondition=e},expression:"processCondition"}})],1),s("v-flex",{staticClass:"pl-2 text-xs-right",attrs:{xs12:"",sm2:""}},[s("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!t.processRoleId},on:{click:t.createItemRole}},[s("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[t.processRoleList.length>0?s("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerProcessRoles,items:t.processRoleList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-left",attrs:{width:"40%"}},[t._v(t._s(e.item.roleName))]),s("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(t._f("moderatorText")(e.item.moderator)))]),s("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.condition))]),s("td",{staticClass:"text-xs-center px-0",attrs:{width:"10%"}},[s("v-icon",{attrs:{small:"",color:"red"},on:{click:function(s){t.deleteProcessRoles(e.item,e.index)}}},[t._v("\n                              delete\n                            ")])],1)]}}])}):t._e()],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Tạo số tiếp nhận hồ sơ"},model:{value:t.currentProcess.generateDossierNo,callback:function(e){t.$set(t.currentProcess,"generateDossierNo",e)},expression:"currentProcess.generateDossierNo"}}),s("v-text-field",{attrs:{label:"Cấu hình sinh mã số hồ sơ",box:"",rules:t.currentProcess.generateDossierNo?[t.rules.required]:[],required:t.currentProcess.generateDossierNo,disabled:!t.currentProcess.generateDossierNo},model:{value:t.currentProcess.dossierNoPattern,callback:function(e){t.$set(t.currentProcess,"dossierNoPattern",e)},expression:"currentProcess.dossierNoPattern"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Sinh ngày hẹn trả hồ sơ"},model:{value:t.currentProcess.generateDueDate,callback:function(e){t.$set(t.currentProcess,"generateDueDate",e)},expression:"currentProcess.generateDueDate"}}),s("v-text-field",{attrs:{label:"Cấu hình sinh ngày hẹn trả",box:"",rules:t.currentProcess.generateDueDate?[t.rules.required]:[],required:t.currentProcess.generateDueDate,disabled:!t.currentProcess.generateDueDate},model:{value:t.currentProcess.dueDatePattern,callback:function(e){t.$set(t.currentProcess,"dueDatePattern",e)},expression:"currentProcess.dueDatePattern"}})],1)],1)],1),s("v-flex",{staticClass:"mt-2",attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Sinh mật mã tra cứu hồ sơ"},model:{value:t.currentProcess.generatePassword,callback:function(e){t.$set(t.currentProcess,"generatePassword",e)},expression:"currentProcess.generatePassword"}})],1),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Gửi thông báo cho chủ hồ sơ"},model:{value:t.currentProcess.directNotification,callback:function(e){t.$set(t.currentProcess,"directNotification",e)},expression:"currentProcess.directNotification"}})],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Server đồng bộ ",box:"",rules:[t.rules.required],required:""},model:{value:t.currentProcess.serverNo,callback:function(e){t.$set(t.currentProcess,"serverNo",e)},expression:"currentProcess.serverNo"}})],1)],1),s("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.id||"0"===t.id?s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateProcess("add")}}},[s("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateProcess("update")}}},[s("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),s("v-btn",{staticClass:"mr-0",attrs:{color:"red darken-3",dark:""},nativeOn:{click:function(e){return t.backToList(e)}}},[s("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1)],1),s("v-tab-item",{key:"tab-2",attrs:{value:"tab-2",transition:"fade-transition","reverse-transition":"fade-transition"}},[t.activeStepDetail?s("v-card",{staticClass:"pt-2",staticStyle:{"margin-bottom":"40px"}},[s("v-form",{ref:"formAddStep",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddStep,callback:function(e){t.validAddStep=e},expression:"validAddStep"}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Tên bước",box:"",rules:[t.rules.required],required:""},model:{value:t.currentStep.stepName,callback:function(e){t.$set(t.currentStep,"stepName",e)},expression:"currentStep.stepName"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Số thứ tự",box:""},model:{value:t.currentStep.sequenceNo,callback:function(e){t.$set(t.currentStep,"sequenceNo",e)},expression:"currentStep.sequenceNo"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Trạng thái chính ",items:t.dossierStatusList,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,clearable:"",rules:[t.rules.required],required:""},on:{change:t.changeDossierStatus},model:{value:t.currentStep.dossierStatus,callback:function(e){t.$set(t.currentStep,"dossierStatus",e)},expression:"currentStep.dossierStatus"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Mã bước quy trình ",box:"",rules:[t.rules.required],required:""},model:{value:t.currentStep.stepCode,callback:function(e){t.$set(t.currentStep,"stepCode",e)},expression:"currentStep.stepCode"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Trạng thái phụ",items:t.dossierSubStatusList,"item-text":"itemName","item-value":"itemCode","hide-selected":!0,clearable:""},model:{value:t.currentStep.dossierSubStatus,callback:function(e){t.$set(t.currentStep,"dossierSubStatus",e)},expression:"currentStep.dossierSubStatus"}})],1),s("v-flex",{attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Thời gian xử lý",box:""},model:{value:t.currentStep.durationCount,callback:function(e){t.$set(t.currentStep,"durationCount",e)},expression:"currentStep.durationCount"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pl-0",attrs:{xs12:"",sm3:""}},[s("v-autocomplete",{attrs:{label:"Vai trò xử lý",box:"",items:t.jobposList,"item-text":"title","item-value":"jobPosId","hide-selected":!0,"return-object":"",clearable:""},model:{value:t.stepRoleId,callback:function(e){t.stepRoleId=e},expression:"stepRoleId"}})],1),s("v-flex",{staticClass:"px-2",attrs:{xs12:"",sm3:""}},[s("v-select",{attrs:{box:"",items:[{text:"Theo dõi",value:0},{text:"Thực hiện",value:1}],"item-text":"text","item-value":"value",disabled:!t.stepRoleId,"return-object":"",cleable:""},model:{value:t.stepModerator,callback:function(e){t.stepModerator=e},expression:"stepModerator"}})],1),s("v-flex",{staticClass:"pl-1",attrs:{xs12:"",sm4:""}},[s("v-text-field",{attrs:{label:"Điều kiện phân công xử lý",disabled:!t.stepRoleId,box:""},model:{value:t.stepCondition,callback:function(e){t.stepCondition=e},expression:"stepCondition"}})],1),s("v-flex",{staticClass:"pl-2 text-xs-right",attrs:{xs12:"",sm2:""}},[s("v-btn",{staticClass:"mr-0",attrs:{color:"blue darken-3",dark:"",disabled:!t.stepRoleId},on:{click:t.createItemStepRole}},[s("v-icon",{attrs:{size:"24"}},[t._v("add")]),t._v(" \n                        Thêm\n                      ")],1)],1)],1)],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[t.stepRoleList.length>0?s("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerProcessRoles,items:t.stepRoleList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-left",attrs:{width:"40%"}},[t._v(t._s(e.item.roleName))]),s("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(t._f("moderatorText")(e.item.moderator)))]),s("td",{staticClass:"text-xs-left",attrs:{width:"25%"}},[t._v(t._s(e.item.condition))]),s("td",{staticClass:"text-xs-center px-0",attrs:{width:"10%"}},[s("v-icon",{attrs:{color:"red",small:""},on:{click:function(s){t.deleteStepRoles(e.item,e.index)}}},[t._v("\n                          delete\n                        ")])],1)]}}])}):t._e()],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Lock State",box:""},model:{value:t.currentStep.lockState,callback:function(e){t.$set(t.currentStep,"lockState",e)},expression:"currentStep.lockState"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Hướng dẫn",box:"",row:""},model:{value:t.currentStep.stepInstruction,callback:function(e){t.$set(t.currentStep,"stepInstruction",e)},expression:"currentStep.stepInstruction"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Tóm tắt hồ sơ",box:""},model:{value:t.currentStep.briefNote,callback:function(e){t.$set(t.currentStep,"briefNote",e)},expression:"currentStep.briefNote"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Nhúng ajax của phần nghiệp vụ",box:""},model:{value:t.currentStep.customProcessUrl,callback:function(e){t.$set(t.currentStep,"customProcessUrl",e)},expression:"currentStep.customProcessUrl"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Cho phép sửa hồ sơ"},model:{value:t.currentStep.editable,callback:function(e){t.$set(t.currentStep,"editable",e)},expression:"currentStep.editable"}})],1)],1),s("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.currentStepId||"0"===t.currentStepId?s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateStep("add")}}},[s("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateStep("update")}}},[s("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),s("v-btn",{attrs:{color:"red darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.goBackStepList}},[s("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1):s("v-card",{staticClass:"py-2 px-2",staticStyle:{"margin-bottom":"40px"}},[s("v-btn",{staticClass:"mb-3",attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.createStep}},[s("v-icon",[t._v("add_circle_outline")]),t._v(" \n              Thêm bước xử lý\n            ")],1),s("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerStep,items:t.stepList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[s("div",[s("span",[t._v(t._s(10*t.listStepPage-10+e.index+1))])])]),s("td",{staticClass:"text-xs-left",attrs:{width:"50%"}},[t._v(t._s(e.item.stepName))]),s("td",{staticClass:"text-xs-left",attrs:{width:"20%"}},[t._v(t._s(e.item.dossierStatusText))]),s("td",{staticClass:"text-xs-center",attrs:{width:"10%"}},[t._v(t._s(e.item.durationCount))]),s("td",{staticClass:"text-xs-center px-0",attrs:{width:"15%"}},[s("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"blue"},on:{click:function(s){t.editStep(e.item)}}},[t._v("\n                    edit\n                  ")]),s("v-icon",{attrs:{small:"",color:"red"},on:{click:function(s){t.deleteStep(e.item)}}},[t._v("\n                    delete\n                  ")])],1)]}}])},[s("template",{slot:"no-data"})],2),s("v-flex",{staticClass:"text-right",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[s("div",{staticClass:"text-xs-right layout wrap mt-2 pr-2",staticStyle:{position:"relative"}},[s("v-flex",{attrs:{xs12:""}},[s("tiny-pagination",{attrs:{total:t.pageTotalStep,page:t.pageStep,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingStepData}})],1)],1)])],1)],1),s("v-tab-item",{key:"tab-3",attrs:{value:"tab-3",transition:"fade-transition","reverse-transition":"fade-transition"}},[t.activeActionDetail?s("v-card",{staticClass:"pt-2",staticStyle:{"margin-bottom":"40px"}},[s("v-form",{ref:"formAddAction",staticClass:"px-2",attrs:{"lazy-validation":""},model:{value:t.validAddAction,callback:function(e){t.validAddAction=e},expression:"validAddAction"}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Tên thao tác",box:"",rules:[t.rules.required],required:""},model:{value:t.currentAction.actionName,callback:function(e){t.$set(t.currentAction,"actionName",e)},expression:"currentAction.actionName"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Mã thao tác",box:""},model:{value:t.currentAction.actionCode,callback:function(e){t.$set(t.currentAction,"actionCode",e)},expression:"currentAction.actionCode"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-text-field",{attrs:{label:"Điều kiện kiểm tra",box:""},model:{value:t.currentAction.preCondition,callback:function(e){t.$set(t.currentAction,"preCondition",e)},expression:"currentAction.preCondition"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-select",{attrs:{box:"",label:"Kích hoạt sự kiện",items:t.autoEventList,"item-text":"text","item-value":"value","hide-selected":!0,clearable:""},model:{value:t.currentAction.autoEvent,callback:function(e){t.$set(t.currentAction,"autoEvent",e)},expression:"currentAction.autoEvent"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{label:"Bước thực hiện thao tác",box:"",items:t.stepList,"item-text":"stepName","item-value":"stepCode","hide-selected":!0,clearable:"",rules:[t.rules.required],required:""},model:{value:t.currentAction.preStepCode,callback:function(e){t.$set(t.currentAction,"preStepCode",e)},expression:"currentAction.preStepCode"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Bước sau thực hiện thao tác",items:t.stepList,"item-text":"stepName","item-value":"stepCode","hide-selected":!0,clearable:"",rules:[t.rules.required],required:""},model:{value:t.currentAction.postStepCode,callback:function(e){t.$set(t.currentAction,"postStepCode",e)},expression:"currentAction.postStepCode"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-select",{attrs:{box:"",label:"Phân công người thực hiện",items:t.assignTypeList,"item-text":"text","item-value":"value","hide-selected":!0,clearable:""},model:{value:t.currentAction.allowAssignUser,callback:function(e){t.$set(t.currentAction,"allowAssignUser",e)},expression:"currentAction.allowAssignUser"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-switch",{attrs:{label:"Cho phép rollback"},model:{value:t.currentAction.rollbackable,callback:function(e){t.$set(t.currentAction,"rollbackable",e)},expression:"currentAction.rollbackable"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Người được chọn ngầm định",items:t.employeeList,"item-text":"fullName","item-value":"employeeId","hide-selected":!0,clearable:""},model:{value:t.currentAction.assignUserId,callback:function(e){t.$set(t.currentAction,"assignUserId",e)},expression:"currentAction.assignUserId"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-autocomplete",{attrs:{box:"",label:"Mẫu hồ sơ",items:t.dossierTemplateList,"item-text":"templateName","item-value":"dossierTemplateId","hide-selected":!0,clearable:""},on:{change:t.getDossierParts},model:{value:t.currentAction.dossierTemplateNo,callback:function(e){t.$set(t.currentAction,"dossierTemplateNo",e)},expression:"currentAction.dossierTemplateNo"}})],1),s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Tài liệu tạo mới",items:t.dossierPartList,"item-text":"partName","item-value":"fileTemplateNo",multiple:"",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item,o=e.index;return[s("v-flex",{attrs:{xs12:""}},[t._v(t._s(o+1)+". "+t._s(r.partName))])]}}]),model:{value:t.currentAction.createDossierFiles,callback:function(e){t.$set(t.currentAction,"createDossierFiles",e)},expression:"currentAction.createDossierFiles"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm6:""}},[s("v-autocomplete",{attrs:{box:"",label:"Kết quả trả về",items:t.dossierPartList,"item-text":"partName","item-value":"fileTemplateNo",multiple:"",clearable:""},scopedSlots:t._u([{key:"selection",fn:function(e){var r=e.item,o=e.index;return[s("v-flex",{attrs:{xs12:""}},[t._v(t._s(o+1)+". "+t._s(r.partName))])]}}]),model:{value:t.currentAction.returnDossierFiles,callback:function(e){t.$set(t.currentAction,"returnDossierFiles",e)},expression:"currentAction.returnDossierFiles"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-select",{attrs:{box:"",label:"Yêu cầu thanh toán",items:t.requestPaymentList,"item-text":"text","item-value":"value","hide-selected":!0,clearable:""},model:{value:t.currentAction.requestPayment,callback:function(e){t.$set(t.currentAction,"requestPayment",e)},expression:"currentAction.requestPayment"}})],1),Number(t.currentAction.requestPayment)>0?s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Chuỗi cấu hình tính phí",box:""},model:{value:t.currentAction.paymentFee,callback:function(e){t.$set(t.currentAction,"paymentFee",e)},expression:"currentAction.paymentFee"}})],1):t._e(),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Mã đồng bộ",box:""},model:{value:t.currentAction.syncActionCode,callback:function(e){t.$set(t.currentAction,"syncActionCode",e)},expression:"currentAction.syncActionCode"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-autocomplete",{attrs:{box:"",label:"Cấu hình cơ quan",items:t.agencyLists,"item-text":"itemName","item-value":"itemCode",multiple:"",clearable:""},model:{value:t.currentAction.createDossier,callback:function(e){t.$set(t.currentAction,"createDossier",e)},expression:"currentAction.createDossier"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-text-field",{attrs:{label:"Cấu hình panel nhập ý kiến",box:""},model:{value:t.currentAction.configNote,callback:function(e){t.$set(t.currentAction,"configNote",e)},expression:"currentAction.configNote"}})],1),s("v-flex",{attrs:{xs12:"",sm12:""}},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"pr-2",attrs:{xs12:"",sm3:""}},[s("v-switch",{attrs:{label:"Sinh mã số tiếp nhận"},model:{value:t.currentAction.createDossierNo,callback:function(e){t.$set(t.currentAction,"createDossierNo",e)},expression:"currentAction.createDossierNo"}})],1),s("v-flex",{staticClass:"pl-2",attrs:{xs12:"",sm3:""}},[s("v-switch",{attrs:{label:"Có ký số điện tử"},model:{value:t.currentAction.eSignature,callback:function(e){t.$set(t.currentAction,"eSignature",e)},expression:"currentAction.eSignature"}})],1)],1)],1)],1),s("v-flex",{staticClass:"text-right pr-3",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[0===t.currentActionId||"0"===t.currentActionId?s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateAction("add")}}},[s("v-icon",[t._v("add_circle_outline")]),t._v(" \n                  Thêm mới\n                ")],1):s("v-btn",{attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:function(e){t.updateAction("update")}}},[s("v-icon",[t._v("save")]),t._v(" \n                  Cập nhật\n                ")],1),s("v-btn",{attrs:{color:"red darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.goBackActionList}},[s("v-icon",[t._v("reply")]),t._v(" \n                  Quay lại\n                ")],1)],1)],1)],1):s("v-card",{staticClass:"py-2 px-2",staticStyle:{"margin-bottom":"40px"}},[s("v-btn",{staticClass:"mb-3",attrs:{color:"blue darken-3",dark:"",loading:t.loading,disabled:t.loading},on:{click:t.createAction}},[s("v-icon",[t._v("add_circle_outline")]),t._v(" \n              Thêm thao tác\n            ")],1),s("v-data-table",{staticClass:"elevation-1 table-bordered",staticStyle:{border:"1px solid #dedede"},attrs:{headers:t.headerAction,items:t.actionList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[s("td",{staticClass:"text-xs-center",attrs:{width:"5%"}},[s("div",[s("span",[t._v(t._s(10*t.listActionPage-10+e.index+1))])])]),s("td",{staticClass:"text-xs-left",attrs:{width:"20%"}},[t._v(t._s(e.item.actionName))]),s("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v(t._s(e.item.preStepName))]),s("td",{staticClass:"text-xs-left",attrs:{width:"30%"}},[t._v(t._s(e.item.postStepName))]),s("td",{staticClass:"text-xs-center px-0",attrs:{width:"15%"}},[s("v-icon",{staticClass:"mr-3",attrs:{small:"",color:"blue"},on:{click:function(s){t.editAction(e.item)}}},[t._v("\n                    edit\n                  ")]),s("v-icon",{attrs:{small:"",color:"red"},on:{click:function(s){t.deleteAction(e.item)}}},[t._v("\n                    delete\n                  ")])],1)]}}])},[s("template",{slot:"no-data"})],2),s("v-flex",{staticClass:"text-right",staticStyle:{position:"fixed",bottom:"0",width:"calc( 100% - 300px )",background:"white","z-index":"2"},attrs:{xs12:""}},[s("div",{staticClass:"text-xs-right layout wrap mt-2 pr-2",staticStyle:{position:"relative"}},[s("v-flex",{attrs:{xs12:""}},[s("tiny-pagination",{attrs:{total:t.pageTotalAction,page:t.pageAction,"custom-class":"custom-tiny-class"},on:{"tiny:change-page":t.paggingActionData}})],1)],1)])],1)],1)],1)],1)],1)],1)},o=[],a=s("3f3e"),i={props:["id"],components:{"tiny-pagination":a["a"]},data:function(){return{breadCrumbsitems:[{text:"Bảng dữ liệu",disabled:!1},{text:"",disabled:!1}],nameScreen:"",currentProcessName:"",processRoleId:"",processModerator:"",processCondition:"",stepRoleId:"",stepModerator:"",stepCondition:"",activeStep:!1,activeStepDetail:!1,currentStepId:"",activeAction:!1,activeActionDetail:!1,currentActionId:"",loading:!1,active:null,processRoleList:[],stepRoleList:[],headerProcessRoles:[{text:"Tên",align:"center",sortable:!1},{text:"Vai trò",align:"center",sortable:!1},{text:"Điều kiện",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],currentProcess:{processNo:"",processName:"",description:"",durationCount:"",durationUnit:0,roleId:"",condition:"",moderator:0,serverNo:"",generateDossierNo:"",dossierNoPattern:"",generateDueDate:"",dueDatePattern:"",generatePassword:!1,directNotification:!1},validAddProcess:!1,pageTotalStep:0,pageStep:1,headerStep:[{text:"STT",align:"center",sortable:!1},{text:"Tên bước",align:"center",sortable:!1},{text:"Trạng thái",align:"center",sortable:!1},{text:"Thời gian xử lý",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],stepList:[],listStepPage:1,listActionPage:1,currentStep:{stepName:"",dossierStatus:"",dossierSubStatus:"",durationCount:"",stepCode:"",roleId:"",moderator:0,condition:"",lockState:"",stepInstruction:"",briefNote:"",customProcessUrl:"",sequenceNo:"",editable:!1},validAddStep:!1,pageTotalAction:0,pageAction:1,headerAction:[{text:"STT",align:"center",sortable:!1},{text:"Tên thao tác",align:"center",sortable:!1},{text:"Bước thực hiện thao tác",align:"center",sortable:!1},{text:"Bước sau",align:"center",sortable:!1},{text:"Thao tác",align:"center",sortable:!1}],actionList:[],stepActionList:[],autoEventList:[{text:"listener",value:"listener"},{text:"timmer",value:"timmer"},{text:"special",value:"special"}],assignTypeList:[{text:"Không phân công",value:0},{text:"Chỉ phân công người thực hiện",value:1},{text:"Phân công thực hiện và phối hợp",value:2},{text:"Phân công thực hiện,phối hợp và theo dõi",value:3}],dossierTemplateList:[],dossierPartList:[],agencyLists:[],employeeList:[],requestPaymentList:[{text:"Không thay đổi trạng thái",value:0},{text:"Yêu cầu nộp tiền tạm ứng",value:1},{text:"Yêu cầu quyết toán phí",value:2},{text:"Báo đã nộp phí trực tuyến",value:3},{text:"Yêu cầu nộp lại phí trực tuyến",value:4},{text:"Xác nhận hoàn thành thu phí",value:5}],currentAction:{actionName:"",actionCode:"",preCondition:"",autoEvent:"",preStepCode:"",postStepCode:"",allowAssignUser:"",rollbackable:!1,dossierTemplateNo:"",createDossierFiles:[],returnDossierFiles:[],requestPayment:"",paymentFee:"",createDossier:[],syncActionCode:"",configNote:"",createDossierNo:!1,eSignature:!1},validAddAction:!1,rules:{required:function(t){return!!t||0===t||"Trường dữ liệu bắt buộc"}}}},created:function(){var t=this;t.$nextTick(function(){var e=t.$router.history.current.query,s=t.$router.history.current.params;console.log("currentParams",s),t.getJobpos(),t.getDossierStatus(),t.activeStep=e.hasOwnProperty("step")&&"true"===e.step,t.activeStepDetail=t.activeStep&&e.hasOwnProperty("stepCode")&&e.stepCode,t.currentStepId=t.activeStep&&e.hasOwnProperty("stepCode")&&e.stepCode?Number(e.stepCode):0,t.activeAction=e.hasOwnProperty("action")&&"true"===e.action,t.activeActionDetail=t.activeAction&&e.hasOwnProperty("actionCode")&&e.actionCode,t.currentActionId=t.activeAction&&e.hasOwnProperty("actionCode")&&e.actionCode?Number(e.actionCode):0,console.log("currentActionId",t.currentActionId),t.activeStep?t.active="tab-2":t.activeAction&&(t.active="tab-3"),t.doDetailContent()})},computed:{jobposList:function(){return this.$store.getters.getJobPosList},dossierStatusList:function(){return this.$store.getters.getDossierStatusList},dossierSubStatusList:function(){return this.$store.getters.getDossierSubStatusList}},watch:{$route:function(t){var e=this,s=t.query;e.activeStep=s.hasOwnProperty("step")&&"true"===s.step,e.activeStepDetail=e.activeStep&&s.hasOwnProperty("stepCode")&&s.stepCode,e.currentStepId=e.activeStep&&s.hasOwnProperty("stepCode")&&s.stepCode?Number(s.stepCode):0,e.activeAction=s.hasOwnProperty("action")&&"true"===s.action,e.activeActionDetail=e.activeAction&&s.hasOwnProperty("actionCode")&&s.actionCode,e.currentActionId=e.activeAction&&s.hasOwnProperty("actionCode")&&s.actionCode?Number(s.actionCode):0,e.activeStep?e.active="tab-2":e.activeAction?e.active="tab-3":e.active="tab-1",e.doDetailContent()}},methods:{getJobpos:function(){var t=this;t.$store.dispatch("getJobposList").then(function(e){t.$store.commit("setJobPosList",e)}).catch(function(t){console.log(t)})},getDossierStatus:function(){var t=this;t.$store.dispatch("getDossierStatusList").then(function(e){t.$store.commit("setDossierStatusList",e)}).catch(function(t){console.log(t)})},changeDossierStatus:function(){var t=this,e=t.currentStep.dossierStatus;e?t.getDossierSubStatus(e):t.$store.commit("setDossierSubStatusList",[])},getDossierSubStatus:function(t){var e=this;e.$store.dispatch("getDossierSubStatusList",t).then(function(t){e.$store.commit("setDossierSubStatusList",t)}).catch(function(t){console.log(t)})},getProcessDetail:function(t){var e=this;e.$store.dispatch("getProcessDetail",t).then(function(t){e.currentProcess=t,e.currentProcessName=t.processName,e.getProcessRoles()}).catch(function(t){console.log(t)})},getProcessStepsDetail:function(t){var e=this,s={processId:e.id,stepCode:t};e.$store.dispatch("getProcessStepsDetail",s).then(function(t){e.currentStep=t,e.getStepRoles(t.stepCode),e.changeDossierStatus()}).catch(function(t){console.log(t)})},getAgencyLists:function(){var t=this;t.$store.dispatch("getAgencyLists").then(function(e){t.agencyLists=e}).catch(function(t){console.log(t)})},getEmployees:function(){var t=this;t.$store.dispatch("getEmployee").then(function(e){t.employeeList=e}).catch(function(t){console.log(t)})},getDossierTemplates:function(){var t=this;t.$store.dispatch("getDossierTemplate").then(function(e){t.dossierTemplateList=e}).catch(function(t){console.log(t)})},getDossierParts:function(){var t=this;t.currentAction.dossierTemplateNo?t.$store.dispatch("getDossierPart",t.currentAction.dossierTemplateNo).then(function(e){t.dossierPartList=e}).catch(function(t){console.log(t)}):t.dossierPartList=[]},paggingStepData:function(t){var e=this,s=e.$router.history.current,r=s.query,o="?";for(var a in r["page"]="",r)""!==r[a]&&"undefined"!==r[a]&&void 0!==r[a]&&null!==r[a]&&"null"!==r[a]&&(o+=a+"="+r[a]+"&");o+="page="+t.page,e.$router.push({path:s.path+o})},paggingActionData:function(t){var e=this,s=e.$router.history.current,r=s.query,o="?";for(var a in r["page"]="",r)""!==r[a]&&"undefined"!==r[a]&&void 0!==r[a]&&null!==r[a]&&"null"!==r[a]&&(o+=a+"="+r[a]+"&");o+="page="+t.page,e.$router.push({path:s.path+o})},getProcessSteps:function(t){var e=this,s=e.$router.history.current.query,r={processId:t,page:s.page?s.page:1};e.pageTotalStep=0,e.$store.dispatch("getProcessStep",r).then(function(t){e.stepList=t.data,e.pageTotalStep=t.total}).catch(function(t){console.log(t)})},getProcessActions:function(){var t=this,e=t.$router.history.current.query,s={processId:t.id,page:e.page?e.page:1};t.pageTotalAction=0,t.$store.dispatch("getProcessAction",s).then(function(e){t.actionList=e.data,t.pageTotalAction=e.total}).catch(function(t){console.log(t)})},getProcessActionDetail:function(t){var e=this,s={processId:e.id,actionCode:t};e.$store.dispatch("getProcessActionsDetail",s).then(function(t){e.currentAction=t,e.currentAction["createDossier"]=t.createDossiers?t.createDossiers.split(","):[],e.currentAction["createDossierFiles"]=t.createDossierFiles?t.createDossierFiles.split(","):[],e.currentAction["returnDossierFiles"]=t.returnDossierFiles?t.returnDossierFiles.split(","):[]}).catch(function(t){console.log(t)})},getProcessRoles:function(){var t=this,e={processId:t.id};t.$store.dispatch("getProcessRole",e).then(function(e){t.processRoleList=e}).catch(function(t){console.log(t)})},doDetailContent:function(){var t=this,e=t.$router.history.current.query;t.getAgencyLists(),Number(t.id)>0&&!t.activeStep&&!t.activeAction?t.getProcessDetail(t.id):t.activeStep&&!t.activeStepDetail?t.getProcessSteps(t.id):t.activeStep&&t.activeStepDetail?(t.currentStep={stepName:"",dossierStatus:"",dossierSubStatus:"",durationCount:"",stepCode:"",roleId:"",moderator:0,condition:"",lockState:"",stepInstruction:"",briefNote:"",customProcessUrl:"",sequenceNo:"",editable:!1},t.stepRoleList=[],Number(e.stepCode)>0&&t.getProcessStepsDetail(e.stepCode)):t.activeAction&&!t.activeActionDetail?t.getProcessActions(t.id):t.activeAction&&t.activeActionDetail&&(t.getProcessSteps(t.id),t.getDossierTemplates(),t.getEmployees(),t.currentAction={actionName:"",actionCode:"",preCondition:"",autoEvent:"",preStepCode:"",postStepCode:"",allowAssignUser:"",rollbackable:!1,dossierTemplateNo:"",createDossierFiles:[],returnDossierFiles:[],requestPayment:"",syncActionCode:"",configNote:"",createDossierNo:!1,eSignature:!1,createDossier:[]},Number(e.actionCode)>0&&t.getProcessActionDetail(e.actionCode))},updateProcess:function(t){var e=this,s=e.$router.history.current.path;e.$refs.formAddProcess.validate()&&(e.currentProcess["type"]=t,e.$store.dispatch("postProcess",e.currentProcess).then(function(r){if("add"===t){if(e.processRoleList.length>0)for(var o in e.processRoleList)e.createProcessRoles(r.serviceProcessId,e.processRoleList[o]);e.$router.push({path:s.replace(0,r.serviceProcessId),query:{renew:Math.floor(100*Math.random())+1}})}else e.currentProcess=r}).catch(function(t){console.log(t)}))},createItemRole:function(){var t=this,e={roleId:t.processRoleId.jobPosId,roleName:t.processRoleId.title,moderator:t.processModerator.value,moderatorText:t.processModerator.text,condition:t.processCondition};Number(t.id)>0?t.createProcessRoles(t.id,e):t.processRoleList.unshift(e)},createProcessRoles:function(t,e){var s=this,r={processId:t,processRoles:e};s.$store.dispatch("postProcessRoles",r).then(function(t){console.log(t),s.getProcessRoles()}).catch(function(t){console.log(t)})},deleteProcessRoles:function(t,e){var s=this;if(Number(s.id)>0){var r=confirm("Xác nhận xóa dữ liệu");if(r){var o={processId:s.id,processRoles:t};s.$store.dispatch("deleteProcessRoles",o).then(function(t){console.log(t),s.getProcessRoles()}).catch(function(t){console.log(t)})}}else s.processRoleList.splice(e,1)},createStep:function(){var t=this,e=t.$router.history.current.path;t.$router.push({path:e+"?step=true&stepCode=0",query:{renew:Math.floor(100*Math.random())+1}})},updateStep:function(t){var e=this,s=e.$router.history.current.path;e.$refs.formAddStep.validate()&&(e.currentStep["type"]=t,e.currentStep["currentProcess"]=e.id,e.$store.dispatch("postProcessStep",e.currentStep).then(function(r){if("add"===t){if(e.stepRoleList.length>0)for(var o in e.stepRoleList)e.createStepRoles(r.stepCode,e.stepRoleList[o]);e.$router.push({path:s+"?step=true&stepCode="+r.stepCode,query:{renew:Math.floor(100*Math.random())+1}})}else e.currentStep=r}).catch(function(t){console.log(t)}))},editStep:function(t){var e=this,s=e.$router.history.current.path;e.$router.push({path:s+"?step=true&stepCode="+t.stepCode,query:{renew:Math.floor(100*Math.random())+1}})},createItemStepRole:function(){var t=this,e=t.$router.history.current.query,s=e.hasOwnProperty("stepCode")?e.stepCode:0,r={roleId:t.stepRoleId.jobPosId,roleName:t.stepRoleId.title,moderatorText:t.stepModerator.text,moderator:t.stepModerator.value,condition:t.stepCondition};s>0?t.createStepRoles(s,r):t.stepRoleList.unshift(r)},createStepRoles:function(t,e){var s=this,r={processId:s.id,stepRoles:e,stepId:t};s.$store.dispatch("postStepRoles",r).then(function(e){console.log(e),s.getStepRoles(t)}).catch(function(t){console.log(t)})},deleteStepRoles:function(t,e){var s=this,r=s.$router.history.current.query,o=r.hasOwnProperty("stepCode")?r.stepCode:0;if(Number(o)>0){var a=confirm("Xác nhận xóa dữ liệu");if(a){var i={processId:s.id,stepRoles:t,stepId:o};s.$store.dispatch("deleteStepRoles",i).then(function(t){console.log(t),s.getStepRoles()}).catch(function(t){console.log(t)})}}else s.stepRoleList.splice(e,1)},deleteStep:function(t){var e=confirm("Xác nhận xóa dữ liệu");if(e){var s=this,r={currentProcess:s.id,stepCode:t.stepCode};s.$store.dispatch("deleteProcessStep",r).then(function(){setTimeout(function(){s.getProcessSteps(s.id)},300)}).catch(function(t){console.log(t)})}},getStepRoles:function(t){var e=this,s={processId:e.id,stepId:t};e.$store.dispatch("getStepRole",s).then(function(t){e.stepRoleList=t}).catch(function(t){console.log(t)})},createAction:function(){var t=this,e=t.$router.history.current.path;t.$router.push({path:e+"?action=true&actionCode=0",query:{renew:Math.floor(100*Math.random())+1}})},updateAction:function(t){var e=this;console.log("currentAction",e.currentAction);var s=e.$router.history.current.path;e.$refs.formAddAction.validate()&&(e.currentAction["type"]=t,e.currentAction["currentProcess"]=e.id,e.$store.dispatch("postProcessAction",e.currentAction).then(function(r){"add"===t?e.$router.push({path:s+"?action=true&actionCode="+r.actionCode,query:{renew:Math.floor(100*Math.random())+1}}):(e.currentAction=r,e.currentAction["createDossier"]=r.createDossiers?r.createDossiers.split(","):[],e.currentAction["createDossierFiles"]=r.createDossierFiles?r.createDossierFiles.split(","):[],e.currentAction["returnDossierFiles"]=r.returnDossierFiles?r.returnDossierFiles.split(","):[])}).catch(function(t){console.log(t)}))},editAction:function(t){var e=this,s=e.$router.history.current.path;e.$router.push({path:s+"?action=true&actionCode="+t.processActionId,query:{renew:Math.floor(100*Math.random())+1}})},deleteAction:function(t){var e=confirm("Xác nhận xóa dữ liệu");if(e){var s=this,r={currentProcess:s.id,processActionId:t.processActionId};s.$store.dispatch("deleteProcessAction",r).then(function(t){console.log(t),s.getProcessActions(s.id)}).catch(function(t){console.log(t)})}},changeTab:function(t){var e=this,s=e.$router.history.current.path;"process"===t?e.$router.push(s):"step"===t?Number(e.id)>0?e.$router.push({path:s+"?step=true&page="+e.listStepPage,query:{renew:Math.floor(100*Math.random())+1}}):e.$router.push(s):e.$router.push({path:s+"?action=true&page="+e.listActionPage,query:{renew:Math.floor(100*Math.random())+1}})},goBackStepList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e+"?step=true")},goBackActionList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e+"?action=true")},backToList:function(){var t=this,e=t.$router.history.current.path;t.$router.push(e.substring(0,e.indexOf("/ext/editor/")))}},filters:{moderatorText:function(t){return!1===t||"false"===t||0===t||"0"===t?"Theo dõi":"Thực hiện"},parseArray:function(t){return t?t.split(","):[]}}},n=i,c=s("2877"),l=Object(c["a"])(n,r,o,!1,null,null,null);l.options.__file="QuyTrinhThuTuc.vue";e["default"]=l.exports}}]);
//# sourceMappingURL=Home.js.map