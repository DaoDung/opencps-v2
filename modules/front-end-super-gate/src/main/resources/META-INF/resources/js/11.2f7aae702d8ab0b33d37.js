webpackJsonp([11,27],{223:function(t,e,s){var i=s(146)(s(530),s(532),null,null);t.exports=i.exports},244:function(t,e,s){var i=s(146)(s(718),s(723),null,null);t.exports=i.exports},530:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__=__webpack_require__(147),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_1_jquery__=__webpack_require__(38),__WEBPACK_IMPORTED_MODULE_1_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__),__WEBPACK_IMPORTED_MODULE_2_toastr__=__webpack_require__(148),__WEBPACK_IMPORTED_MODULE_2_toastr___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_toastr__);__webpack_exports__.default={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3}]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){return this.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData}},mounted:function(){var t=this;t.page=1,t.$nextTick(function(){})},methods:{resetCounterTemplate:function(t,e){t.commit,t.state;this.dossierTemplateItems.forEach(function(t){t.partNo===e.partNo&&(t.hasForm?t.count=1:t.count=0)})},recountFileTemplates:function(){var t=this;t.dossierTemplateItems.forEach(function(e){e.count=0,t.dossierFilesItems.forEach(function(t){e.partNo!==t.dossierPartNo||t.eForm||e.count++})})},initData:function(t){var e=this,s=[];console.log("dossierId++++++++",t.dossierId),s.push(e.$store.dispatch("loadDossierTemplates",t)),s.push(e.$store.dispatch("loadDossierMark",t)),s.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),e.thongTinHoSo=t,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a.all(s).then(function(t){var s=t[0],i=t[1],o=t[2];console.log("dossierTemplates++++++",s),console.log("dossierMarks++++++",i),console.log("dossierFiles++++++",o);var a=e.mergeDossierTemplateVsDossierFiles(s,o);console.log("dossierTemplateItems++++++MERGER++++file",a),a=e.mergeDossierTemplateVsDossierMark(a,i),console.log("dossierTemplateItems++++++MERGE++++mark",a),e.dossierTemplateItems=a,e.dossierFilesItems=o,e.dossierMarksItems=i,setTimeout(function(t){e.genAllAlpacaForm(o,a),e.recountFileTemplates()},500),console.log("dossierTemplateItems",e.dossierTemplateItems)}).catch(function(t){})},genAllAlpacaForm:function(t,e){var s=this;if(t.length>0){var i=t.filter(function(t){return t.eForm}),o=e.filter(function(t){return t.hasForm&&s.partTypes.includes(t.partType)});i.length>0?i.forEach(function(t){t.eForm&&s.$store.dispatch("loadAlpcaForm",t)}):e.forEach(function(t){t.hasForm&&s.partTypes.includes(t.partType)&&(t.templateFileNo=s.thongTinHoSo.dossierTemplateNo,s.showAlpacaJSFORM(t))}),o.length!==i.length&&o.forEach(function(t){-1===i.findIndex(function(e){return t.partNo===e.dossierPartNo})&&(t.templateFileNo=s.thongTinHoSo.dossierTemplateNo,s.showAlpacaJSFORM(t))})}else e.forEach(function(t){t.hasForm&&s.partTypes.includes(t.partType)&&(t.templateFileNo=s.thongTinHoSo.dossierTemplateNo,s.showAlpacaJSFORM(t))})},postDossierMark:function(t,e){var s=this;t.dossierId=s.thongTinHoSo.dossierId,s.$store.dispatch("postDossierMark",t).then(function(t){}).catch(function(t){})},mergeDossierTemplateVsDossierFiles:function(t,e){var s=this;return 0!==e.length?t.forEach(function(t){var i=e.find(function(e){return t.partNo===e.dossierPartNo&&s.partTypes.includes(t.partType)&&e.eForm});i?t.daKhai=!0:!i&&t.hasForm&&(t.daKhai=!1)}):t.forEach(function(t){t.hasForm&&(t.daKhai=!1)}),t},mergeDossierTemplateVsDossierMark:function(t,e){return 0!==e.length?t.map(function(t){t.count=0;var s=e.find(function(e){return e.dossierPartNo===t.partNo});return t.fileMark=null!==s&&void 0!==s?s.fileMark:0,t}):t&&t.forEach(function(t){t.count=0,t.fileMark=0}),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item.dossierId=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(function(resScript){vm.$store.dispatch("loadFormData",item).then(function(resData){__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#formAlpaca"+item.partNo+vm.id).empty();var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm:function(t,e){var s=this,i=s.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo&&e.eForm});i?(i.dossierId=s.thongTinHoSo.dossierId,i.id=s.id,s.$store.dispatch("putAlpacaForm",i).then(function(t){}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(t.dossierId=s.thongTinHoSo.dossierId,t.id=s.id,s.$store.dispatch("postEform",t).then(function(t){s.dossierTemplateItems[e].daKhai=!0,s.$store.dispatch("loadDossierFiles",s.thongTinHoSo.dossierId).then(function(t){s.dossierFilesItems=t}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},onDeleteAttackFiles:function(t){var e=this;console.log("delete"),confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?")&&e.dossierFilesItems.forEach(function(s){s.dossierPartNo===t.partNo&&(s.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",s).then(function(s){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)}).catch(function(t){}))})},pickFile:function(t){this.stateAddFileOther=!1,document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e){var s=this;if(s.dossierTemplatesItemSelect=e,s.progressUploadPart=e.partNo,e.dossierId=s.thongTinHoSo.dossierId,e.dossierTemplateNo=s.thongTinHoSo.dossierTemplateNo,3!==e.partType)s.$store.dispatch("uploadSingleFile",e).then(function(t){s.progressUploadPart="",s.$store.dispatch("loadDossierFiles",s.thongTinHoSo.dossierId).then(function(t){s.dossierFilesItems=t,s.recountFileTemplates();var e=s.dossierFilesItems.filter(function(t){return t.dossierPartNo===s.dossierTemplatesItemSelect.partNo&&!t.eForm});e&&(s.fileViews=e)})}).catch(function(t){s.progressUploadPart=""});else{if(0===__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#file"+e.partNo)[0].files.length)return void(s.progressUploadPart="");s.partView=e.partNo,s.stateView=!0,s.dialogAddOtherTemp=!0}},loadAlpcaForm:function(t){var e=this,s=e.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo&&e.eForm});s?(s.id=e.id,e.$store.dispatch("loadAlpcaForm",s)):e.dossierTemplateItems.forEach(function(s){s.hasForm&&t.partNo===s.partNo&&(s.templateFileNo=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(s))})},deleteSingleFileEform:function(t,e){var s=this;confirm("Bạn có muốn xóa?")&&(s.dossierFilesItems.forEach(function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e.dossierId=s.thongTinHoSo.dossierId,s.$store.dispatch("deleteDossierFile",e).then(function(e){console.log("success!"),s.$store.dispatch("loadDossierFiles",s.thongTinHoSo.dossierId).then(function(e){s.dossierFilesItems=e,s.recountFileTemplates();var i=s.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.partNo&&!e.eForm});i&&(s.fileViews=i)})}))}),s.dossierTemplateItems[e].daKhai=!1)},previewFileEfom:function(t,e){var s=this;s.dossierFilesItems.forEach(function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e.dossierId=s.thongTinHoSo.dossierId,s.dialogPDFLoading=!0,s.dialogPDF=!0,s.onlyView?s.$store.dispatch("viewFile",e).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+s.id).src=t}):(e.id=s.id,s.$store.dispatch("putAlpacaForm",e).then(function(t){setTimeout(function(){s.$store.dispatch("viewFile",e).then(function(t){s.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+s.id).src=t})},1e3)}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})))})},deleteSingleFile:function(t,e){var s=this;confirm("Bạn có muốn xóa?")&&(t.dossierId=s.thongTinHoSo.dossierId,s.$store.dispatch("deleteDossierFile",t).then(function(i){s.fileViews.splice(e,1),s.stateView=!0,s.partView=t.dossierPartNo,s.$store.dispatch("loadDossierFiles",s.thongTinHoSo.dossierId).then(function(t){s.dossierFilesItems=t,s.recountFileTemplates()})}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},viewFile:function(t){var e=this,s=this;s.dossierFilesItems.forEach(function(i){i.dossierId=s.thongTinHoSo.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)})},checkPartType3:function(){var t=this;if(0!==t.dossierTemplateItems.length)for(var e=0;e<t.dossierTemplateItems.length;e++)if(3===t.dossierTemplateItems[e].partType)return!0;return!1},viewFile2:function(t){var e=this;if("doc"===t.fileType||"docx"===t.fileType||"xsl"===t.fileType){var s=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.open(s)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("viewFile",t).then(function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var s=e.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.partNo&&!e.eForm});if(!s)return;e.fileViews=s,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},saveMark:function(){var t=this;t.dossierTemplateItems&&t.dossierTemplateItems.forEach(function(e,s){1===e.partType&&(e.dossierId=t.thongTinHoSo.dossierId,t.$store.dispatch("postDossierMark",e))})},changeFileMark:function(t){var e=this;t.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("postDossierMark",t)},changeOtherDossierTemp:function(t){var e=this;if(3===e.originality&&e.stateAddFileOther)e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,displayName:t,partNo:e.dossierTemplatesItemSelect.partNo}).then(function(t){e.loadingAddOther=!1,e.dialogAddOtherTemp=!1}).catch(function(t){e.loadingAddOther=!1});else{console.log("dossierTemplatesItemSelect ",e.dossierTemplatesItemSelect);var s=e.dossierTemplatesItemSelect;s.dossierId=e.thongTinHoSo.dossierId,s.displayName=t,s.dossierTemplateNo=e.thongTinHoSo.dossierTemplateNo,e.$store.dispatch("uploadSingleFile",s).then(function(t){e.progressUploadPart="",e.dialogAddOtherTemp=!1,console.log("success!!!!!!!!!!!!!!"),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then(function(t){if(e.dossierFilesItems=t,e.recountFileTemplates(),e.stateView&&e.dossierFilesItems){var s=e.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.dossierTemplatesItemSelect.partNo&&!t.eForm});s&&(e.fileViews=s)}})}).catch(function(t){e.progressUploadPart=""})}},addOtherTemplate:function(){var t=this;t.$refs.form.validate()&&(console.log("add"),t.changeOtherDossierTemp(t.otherDossierTemplate))},editDisplayName:function(t,e){var s=this;s.dossierFileIdView!==t.dossierFileId?(s.dossierFileIdView=t.dossierFileId,s.stateEdit=!0):(s.dossierFileIdView=t.dossierFileId,s.stateEdit=!s.stateEdit)},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName:function(t,e){var s=this,i={dossierId:s.thongTinHoSo.dossierId,value:value};s.$store.dispatch("changeDisplayNameFile",i).then(function(t){s.fileViews[e].displayName=t.displayName,s.stateEdit=!1}).catch(function(t){console.log("error")})}}}},532:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("v-card",[t._l(t.dossierTemplateItems,function(e,i){return t.partTypes.includes(e.partType)?s("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[s("v-expansion-panel",{staticClass:"expaned__list__data"},[s("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[s("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[s("div",{staticStyle:{"align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px"},style:{width:3===e.partType||1===t.originality||t.onlyView?"calc(100% - 120px)":"calc(100% - 240px)"}},[s("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex","min-height":"38px"},on:{click:function(s){t.loadAlpcaForm(e)}}},[s("div",{staticClass:"header__tphs"},[s("span",{staticClass:"text-bold"},[t._v(t._s(i+1)+".")]),t._v("  ")]),t._v(" "),s("div",{staticClass:"header__tphs"},[t._v("\n                  "+t._s(e.partName)+" "),e.required?s("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e()])]),t._v(" "),e.hasForm?s("i",{staticStyle:{"font-size":"10px",color:"#0d71bb","margin-left":"10px"}},[t._v("(Form trực tuyến)")]):t._e(),t._v(" "),e.hasForm?s("span",[t._v(" - ")]):t._e(),t._v(" "),e.hasForm?s("i",{staticStyle:{"font-size":"10px",color:"#0d71bb"}},[t._v("("+t._s(e.daKhai?"Đã khai":"Chưa khai ")+")")]):t._e(),t._v(" "),t._l(t.dossierFilesItems,function(i,o){return e.partNo!==i.dossierPartNo||i.eForm?t._e():s("div",{key:o},[s("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px","font-size":"12px"}},[s("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(i)}}},[i.eForm?s("v-icon",[t._v("border_color")]):s("v-icon",[t._v("attach_file")]),t._v("\n                    "+t._s(i.displayName)+" - \n                    "),s("i",[t._v(t._s(i.modifiedDate))])],1),t._v(" "),t.onlyView?t._e():s("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(i,o)}}},[s("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])})],2)]),t._v(" "),e.hasForm?s("v-card",[s("v-card-text",{staticStyle:{"background-color":"#f6f6f6"}},[s("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():s("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e.hasForm&&!t.onlyView?s("v-btn",{attrs:{color:"primary"},on:{click:function(s){t.saveAlpacaForm(e,i)}}},[t._v("Lưu lại")]):t._e(),t._v(" "),e.daKhai&&e.hasForm&&!t.onlyView?s("v-btn",{attrs:{color:"primary"},on:{click:function(s){t.deleteSingleFileEform(e,i)}}},[t._v("Xóa")]):t._e(),t._v(" "),e.daKhai&&e.hasForm?s("v-btn",{attrs:{color:"primary"},on:{click:function(s){t.previewFileEfom(e,i)}}},[t._v("Preview")]):t._e(),t._v(" "),!t.onlyView||e.daKhai?s("div",{class:{no_acction__event:t.onlyView},attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e()],1)],1)],1)],1):t._e()],1)],1),t._v(" "),t.onlyView&&1===t.originality?t._e():s("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-layout",{attrs:{row:"",wrap:""}},[1===t.originality||1!==e.partType||t.thongTinHoSo.online?t._e():s("v-flex",{staticClass:"layout wrap",staticStyle:{width:"110px"}},[s("v-select",{attrs:{items:t.fileMarkItems,disabled:t.onlyView},model:{value:t.dossierTemplateItems[i].fileMark,callback:function(e){t.$set(t.dossierTemplateItems[i],"fileMark",e)},expression:"dossierTemplateItems[index].fileMark"}})],1),t._v(" "),s("v-flex",{class:{"text-xs-center":!t.onlyView,"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"100px","margin-right":t.onlyView?"15px":""}},[s("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(s){t.onUploadSingleFile(s,e)}}}),t._v(" "),3!==e.partType||3!==t.originality||t.onlyView?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(s){t.addFileOther(e)}},slot:"activator"},[s("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),t._v(" "),s("span",[t._v("Thêm giấy tờ khác")])],1),t._v(" "),t.progressUploadPart===e.partNo?s("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t.progressUploadPart===e.partNo||t.onlyView?t._e():s("v-tooltip",{attrs:{top:""}},[s("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(s){t.pickFile(e)}},slot:"activator"},[s("v-badge",[s("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),t._v(" "),s("span",[t._v("Tải file lên")])],1)],1)],1)],1)],1):t._e()}),t._v(" "),s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm2:""}}),t._v(" "),s("v-flex",{attrs:{xs12:"",sm12:""}})],1),t._v(" "),s("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[s("v-card",[s("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[s("v-card-title",{staticClass:"headline"},[t._v("Tên giấy tờ")]),t._v(" "),s("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[s("v-icon",[t._v("clear")])],1),t._v(" "),t.loadingAddOther?s("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),t._v(" "),s("v-card-text",{staticClass:"pb-0 pt-4"},[s("v-layout",{attrs:{wrap:""}},[s("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[s("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),t._v(" "),s("v-card-actions",[s("v-spacer"),t._v(" "),s("v-btn",{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[t._v("\n              Quay lại\n            ")]),t._v(" "),s("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate(e)}}},[t._v("\n            Đồng ý\n            "),s("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),t._v(" "),s("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[s("v-card",[s("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),t._v(" "),s("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[s("v-icon",[t._v("clear")])],1),t._v(" "),t.dialogPDFLoading?s("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[s("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),t._v(" "),s("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},staticRenderFns:[]}},718:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s(147),o=s.n(i),a=s(39),r=s(223),n=s.n(r);e.default={props:["index","id"],data:function(){return{dialog_addTHPHS:!1,loadingAction:!1,thongTinChiTietHoSo:{},btnDossierDynamics:[],visibleBtnNextAction:!0}},computed:{loading:function(){return this.$store.getters.loading}},components:{"thanh-phan-ho-so":n.a},created:function(){var t=this;t.initData(t.id),t.getNextActions(t.id)},watch:{},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(function(t){e.thongTinChiTietHoSo=t,e.$refs.thanhphanhoso.initData(t)})},goBack:function(){window.history.back()},getNextActions:function(t){var e=this,s={dossierId:t};e.$store.dispatch("pullNextactions",s).then(function(t){e.btnDossierDynamics=t})},nextAction:function(t,e){console.log("Đã bổ sung");var s=this;console.log("luu Ho So--------------------"),s.$store.commit("setPrintPH",!1);var i=this.$refs.thanhphanhoso.dossierTemplateItems,r=s.$refs.thanhphanhoso.dossierFilesItems,n=i,l=[],d=[];n&&(n.forEach(function(t,e){1===t.partType&&(t.dossierId=s.thongTinChiTietHoSo.dossierId,d.push(s.$store.dispatch("postDossierMark",t)))}),0!==r.length?r.forEach(function(t,e){t.eForm&&(t.dossierId=s.thongTinChiTietHoSo.dossierId,l.push(s.$store.dispatch("putAlpacaForm",t)))}):n.forEach(function(t,e){1===t.partType&&t.hasForm&&(t.dossierId=s.thongTinChiTietHoSo.dossierId,l.push(s.$store.dispatch("postEform",t)))})),o.a.all(d).then(function(t){}).catch(function(t){}),o.a.all(l).then(function(e){console.log(e);var i={dossierId:s.thongTinChiTietHoSo.dossierId,actionCode:t.actionCode},o=s.$router.history.current.query;s.loadingActionProcess=!0,s.$store.dispatch("processDossierRouter",i).then(function(t){s.visibleBtnNextAction=!1,a.a.push({path:s.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:o.q}})})}).catch(function(t){console.log("reject=============",t)})}}}},723:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{staticClass:"row-header"},[s("div",{staticClass:"background-triangle-big"},[t._v(" HOÀN THIỆN BỔ SUNG HỒ SƠ ")]),t._v(" "),s("div",{staticClass:"layout row wrap header_tools row-blue"},[s("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold"},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),t._v(" "),s("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[s("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n        Quay lại  \n          "),s("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),t._v(" "),s("v-expansion-panel",{staticClass:"expansion-p0",attrs:{expand:""}},[s("v-expansion-panel-content",{attrs:{value:!0}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"background-triangle-small"},[t._v("I. ")]),t._v("THÔNG TIN HỒ SƠ\n      ")]),t._v(" "),s("v-card",{staticClass:"mb-2"},[s("v-card-text",[s("v-layout",{attrs:{row:"",wrap:""}},[s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Loại hồ sơ: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[s("v-chip",{staticClass:"pl-0 mx-0 my-0",attrs:{small:""}},[t._v(" Hồ sơ trực tuyến ")])],1)],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã hồ sơ: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.dossierIdCTN))])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.receiveDate))])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Chủ hồ sơ: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Địa chỉ: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.address))])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Người nộp: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.delegateName))])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):s("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Số CMND: ")])],1),t._v(" "),s("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?s("content-placeholders",{staticClass:"mt-1"},[s("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),s("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantIdNo))])],1)],1)],1)],1)],1)],1),t._v(" "),s("v-expansion-panel",{staticClass:"expansion-p0",staticStyle:{position:"relative"},attrs:{expand:""}},[s("v-expansion-panel-content",{attrs:{value:!0}},[s("div",{attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"background-triangle-small"},[t._v("II. ")]),t._v("THÀNH PHẦN HỒ SƠ\n      ")]),t._v(" "),s("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),t._v(" "),s("div",{staticClass:"text-center mt-2"},[t._l(t.btnDossierDynamics,function(e,i){return t.visibleBtnNextAction?s("v-btn",{key:i,attrs:{color:"primary"},on:{click:function(s){t.nextAction(e,i)}}},[t._v("\n      "+t._s(e.actionName)+"\n      "),s("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}),t._v(" "),s("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.goBack(e)}}},[s("v-icon",[t._v("undo")]),t._v("  \n      Quay lại\n      "),s("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=11.2f7aae702d8ab0b33d37.js.map