webpackJsonp([3],{466:function(t,a,e){var i=e(184)(e(479),e(481),null,null);i.options.__file="d:\\FDS_OPENCPS\\front-end-v2.1\\frontend-opencps-v2.1\\onegate_21_kios\\src\\components\\TraCuuHoSo.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] TraCuuHoSo.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},479:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(80),s=e(60),o=(e.n(s),e(185)),n=e.n(o);a.default={props:[],components:{},data:function(){return{loading:!1,loadingAction:!1,loadingTable:!1,dossierNoKey:"",applicantNameKey:"",applicantIdNoKey:"",dossierList:[],dossierItemTotal:0,hosoDatasPage:1,totalPages:1,headersTable:[{text:"Số thứ tự",align:"center",sortable:!1},{text:"Số hồ sơ",align:"center",sortable:!1},{text:"Thủ tục thực hiện",align:"center",sortable:!1},{text:"Người nộp",align:"center",sortable:!1},{text:"Tình trạng hồ sơ",align:"center",sortable:!1}],validateTracuu:!1,dialogCheckPass:!1,dialogError:!1,dossierDetail:"",valid:!1,passCheck:"",validPass:!0,visible:!1,layout:"normal",input:null,options:{useKbEvents:!0,preventClickEvent:!1}}},computed:{},created:function(){this.$nextTick(function(){var t=this,a=t.$router.history.current,e=a.query;n()("#dossierNoKey").val(e.hasOwnProperty("dossierNo")?e.dossierNo:""),n()("#applicantIdNoKey").val(e.hasOwnProperty("applicantIdNo")?e.applicantIdNo:""),n()("#applicantNameKey").val(e.hasOwnProperty("applicantName")?e.applicantName:""),t.hosoDatasPage=1,""!==n()("#dossierNoKey").val()||""!==n()("#applicantIdNoKey").val()||""!==n()("#applicantNameKey").val()?(t.validateTracuu=!0,t.doLoadingDataHoSo()):t.validateTracuu=!1})},watch:{$route:function(t,a){var e=this,i=(t.params,t.query);n()("#dossierNoKey").val(i.hasOwnProperty("dossierNo")?i.dossierNo:""),n()("#applicantIdNoKey").val(i.hasOwnProperty("applicantIdNo")?i.applicantIdNo:""),n()("#applicantNameKey").val(i.hasOwnProperty("applicantName")?i.applicantName:""),e.hosoDatasPage=1,n()("#dossierNoKey").val()||n()("#applicantIdNoKey").val()||n()("#applicantNameKey").val()?(e.validateTracuu=!0,e.doLoadingDataHoSo()):e.validateTracuu=!1}},methods:{filterDossier:function(){var t=this;t.visible=!1;var a=t.$router.history.current,e=a.query,i="?";e.dossierNo=n()("#dossierNoKey").val(),e.applicantIdNo=n()("#applicantIdNoKey").val(),e.applicantName=n()("#applicantNameKey").val();for(var s in e)""!==e[s]&&"undefined"!==e[s]&&void 0!==e[s]&&null!==e[s]&&(i+=s+"="+e[s]+"&");n()("#dossierNoKey").val()||n()("#applicantIdNoKey").val()||n()("#applicantNameKey").val()?(t.validateTracuu=!0,t.$router.push({path:a.path+i,query:{renew:Math.floor(100*Math.random())+1}})):t.validateTracuu=!1},showMore:function(){var t=this;t.hosoDatasPage+=1,t.loadingTable=!0;var a=i.a.history.current.query,e=null;e={page:t.hosoDatasPage,dossierNo:a.hasOwnProperty("dossierNo")?a.dossierNo:"",applicantName:a.hasOwnProperty("applicantName")?a.applicantName:"",applicantIdNo:a.hasOwnProperty("applicantIdNo")?a.applicantIdNo:""},t.$store.dispatch("loadingDataHoSo",e).then(function(a){t.loadingTable=!1;var e=a.data;t.dossierList=t.dossierList.concat(e)}).catch(function(a){t.loadingTable=!1})},doLoadingDataHoSo:function(){var t=this;t.dossierList=[],t.loadingTable=!0;var a=i.a.history.current.query,e=null;e={page:t.hosoDatasPage,dossierNo:a.hasOwnProperty("dossierNo")?a.dossierNo:"",applicantName:a.hasOwnProperty("applicantName")?a.applicantName:"",applicantIdNo:a.hasOwnProperty("applicantIdNo")?a.applicantIdNo:""},t.$store.dispatch("loadingDataHoSo",e).then(function(a){t.loadingTable=!1,t.dossierList=a.data,t.dossierItemTotal=a.total,t.totalPages=Math.ceil(a.total/15)}).catch(function(a){t.loadingTable=!1,t.dossierList=[],t.dossierItemTotal=0})},viewDetail:function(t){var a=this;a.dossierDetail=t,a.dialogCheckPass=!0},submitViewDetail:function(){var t=this;if(""!==n()("#passCheck").val()){t.validPass=!0,t.loading=!0;var a={password:n()("#passCheck").val(),dossierId:t.dossierDetail.dossierId};t.$store.dispatch("getDossierDetailPass",a).then(function(a){t.loading=!1,t.dialogCheckPass=!1,t.clearDialog(),a.status&&"203"===a.status.toString()?t.dialogError=!0:a.status&&"200"===a.status.toString()&&i.a.push("/ho-so/"+t.dossierDetail.dossierId)}).catch(function(a){t.dialogCheckPass=!1,t.visible=!1,t.loading=!1,console.log("reject",a)})}else t.validPass=!1},clearDialog:function(){n()("#passCheck").val(""),this.validPass=!0,this.visible=!1},clear:function(t){n()("#"+t).val("")},accept:function(t){this.hide()},show:function(t){this.validPass=!0,this.input=t.target,this.visible||(this.visible=!0),this.bindClick("search")},showKeyboard:function(t){this.validPass=!0,this.input=t.target,this.visible||(this.visible=!0),this.bindClick("view")},hide:function(){this.visible=!1},next:function(){var t=this,a=document.querySelectorAll("input"),e=!1;[].forEach.call(a,function(i,s){!e&&i===t.input&&s<a.length-1&&(e=!0,t.$nextTick(function(){a[s+1].focus()}))}),e||(this.input.blur(),this.hide())},bindClick:function(t){var a=this;setTimeout(function(){n()(".keyboard .line:nth-child(3) .key:last-child").unbind("click"),"search"===t?n()(".keyboard .line:nth-child(3) .key:last-child").bind("click",function(){a.filterDossier()}):"view"===t&&n()(".keyboard .line:nth-child(3) .key:last-child").bind("click",function(){a.submitViewDetail()})},300)}}}},481:function(t,a,e){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"px-2 py-0"},[e("div",[e("v-card",[e("v-layout",{staticClass:"px-0 py-0",attrs:{wrap:""}},[e("div",{staticStyle:{width:"calc(100% - 150px)"}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs4:""}},[e("div",{staticClass:"input-group input-group--placeholder input-group--text-field primary--text"},[e("label",[t._v("Số hồ sơ")]),t._v(" "),e("div",{staticClass:"input-group__input"},[e("input",{attrs:{id:"dossierNoKey","data-layout":"normal","aria-label":"Số hồ sơ",placeholder:"Nhấn để nhập mã số hồ sơ",type:"text"},on:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.filterDossier(a):null},focus:t.show}}),t._v(" "),t.visible?e("i",{staticClass:"icon material-icons input-group__append-icon input-group__icon-cb input-group__icon-clearable",attrs:{"aria-hidden":"true"},on:{click:function(a){t.clear("dossierNoKey")}}},[t._v("clear")]):t._e()]),t._v(" "),e("div",{staticClass:"input-group__details"})])]),t._v(" "),e("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs4:""}},[e("div",{staticClass:"input-group input-group--placeholder input-group--text-field primary--text"},[e("label",[t._v("Số CMND")]),t._v(" "),e("div",{staticClass:"input-group__input"},[e("input",{attrs:{id:"applicantIdNoKey","data-layout":"normal","aria-label":"Số CMND",placeholder:"Nhấn để nhập số CMND",type:"text"},on:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.filterDossier(a):null},focus:t.show}}),t._v(" "),t.visible?e("i",{staticClass:"icon material-icons input-group__append-icon input-group__icon-cb input-group__icon-clearable",attrs:{"aria-hidden":"true"},on:{click:function(a){t.clear("applicantIdNoKey")}}},[t._v("clear")]):t._e()]),t._v(" "),e("div",{staticClass:"input-group__details"})])]),t._v(" "),e("v-flex",{staticClass:"pl-2 pr-2",attrs:{xs4:""}},[e("div",{staticClass:"input-group input-group--placeholder input-group--text-field primary--text"},[e("label",[t._v("Họ tên người nộp")]),t._v(" "),e("div",{staticClass:"input-group__input"},[e("input",{attrs:{id:"applicantNameKey","data-layout":"normal","aria-label":"Số CMND",placeholder:"Nhấn để nhập họ và tên",type:"text"},on:{keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.filterDossier(a):null},focus:t.show}}),t._v(" "),t.visible?e("i",{staticClass:"icon material-icons input-group__append-icon input-group__icon-cb input-group__icon-clearable",attrs:{"aria-hidden":"true"},on:{click:function(a){t.clear("applicantNameKey")}}},[t._v("clear")]):t._e()]),t._v(" "),e("div",{staticClass:"input-group__details"})])])],1)],1),t._v(" "),e("div",{staticClass:"pt-2 text-center",staticStyle:{width:"150px"}},[e("v-btn",{attrs:{color:"primary",loading:t.loadingTable,disabled:t.loadingTable},on:{click:t.filterDossier}},[e("v-icon",{attrs:{size:"18"}},[t._v("search")]),t._v("\n             \n            Tra Cứu\n            "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)]),t._v(" "),!1===t.validateTracuu?e("v-alert",{staticClass:"mt-5 mx-2",attrs:{value:!0,outline:"",color:"warning",icon:"priority_high"}},[t._v("\n        Yêu cầu nhập thông tin để tra cứu\n      ")]):t._e(),t._v(" "),!0===t.validateTracuu?e("div",{class:t.visible?"overlayActive":""},[e("div",{staticClass:"my-3 pt-2 text-center total-result-search",class:t.visible?"overlayActive":""},[e("span",{staticClass:"text-bold"},[t._v("Có "+t._s(t.dossierItemTotal)+" hồ sơ được tìm thấy")])]),t._v(" "),e("v-data-table",{staticClass:"table-tracuu table-landing table-bordered",class:t.visible?"overlayActive":"",attrs:{headers:t.headersTable,items:t.dossierList,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(a){return[e("tr",{class:{active:a.index%2==1},on:{click:function(e){t.viewDetail(a.item)}}},[e("td",{staticClass:"text-xs-center"},[t.loadingTable?e("content-placeholders",[e("content-placeholders-text",{attrs:{lines:1}})],1):e("div",[e("span",[t._v(t._s(a.index+1))])])],1),t._v(" "),e("td",{staticClass:"text-xs-left"},[t.loadingTable?e("content-placeholders",[e("content-placeholders-text",{attrs:{lines:1}})],1):e("div",[e("span",[t._v(t._s(a.item.dossierNo))]),e("br")])],1),t._v(" "),e("td",{staticClass:"text-xs-left"},[t.loadingTable?e("content-placeholders",[e("content-placeholders-text",{attrs:{lines:1}})],1):e("div",[e("span",[t._v(t._s(a.item.serviceName))])])],1),t._v(" "),e("td",{staticClass:"text-xs-left"},[t.loadingTable?e("content-placeholders",[e("content-placeholders-text",{attrs:{lines:1}})],1):e("div",[e("span",[t._v(t._s(a.item.applicantName))])])],1),t._v(" "),e("td",{staticClass:"text-xs-left"},[t.loadingTable?e("content-placeholders",[e("content-placeholders-text",{attrs:{lines:1}})],1):e("div",[e("span",[e("span",[t._v(t._s(a.item.dossierStatusText))])])])],1)])]}}])}),t._v(" "),t.hosoDatasPage<t.totalPages&&t.dossierItemTotal>0?e("div",{staticClass:"mt-3 text-center"},[e("v-btn",{attrs:{outline:"",color:"indigo",loading:t.loadingTable,disabled:t.loadingTable},on:{click:t.showMore}},[e("v-icon",{attrs:{size:"20"}},[t._v("expand_more")]),t._v(" \n            Xem thêm\n            "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1):t._e()],1):t._e(),t._v(" "),t.visible?e("div",{staticClass:"virtual-keyboard"},[t.visible?e("vue-touch-keyboard",{attrs:{layout:t.layout,cancel:t.hide,accept:t.accept,input:t.input,next:t.next,options:t.options}}):t._e()],1):t._e()],1),t._v(" "),e("v-dialog",{attrs:{"content-class":"dialog-keyboard",persistent:"","max-width":"500px"},model:{value:t.dialogCheckPass,callback:function(a){t.dialogCheckPass=a},expression:"dialogCheckPass"}},[e("v-card",[e("v-card-title",{staticStyle:{color:"#fff","background-color":"#0b72ba"}},[e("span",{staticClass:"headline"},[t._v("Mã bí mật truy cập hồ sơ")])]),t._v(" "),e("v-card-text",[e("v-container",{attrs:{"grid-list-md":""}},[e("v-layout",{attrs:{wrap:""}},[e("v-flex",{attrs:{xs12:""}},[e("div",{staticClass:"input-group input-group--placeholder input-group--text-field primary--text"},[e("div",{staticClass:"input-group__input"},[e("input",{attrs:{id:"passCheck","data-layout":"normal","aria-label":"Số hồ sơ",placeholder:"Nhập mã bí mật đã được cấp",type:"text"},on:{focus:t.showKeyboard,keyup:function(a){return"button"in a||!t._k(a.keyCode,"enter",13,a.key,"Enter")?t.submitViewDetail(a):null}}}),t._v(" "),t.visible?e("i",{staticClass:"icon material-icons input-group__append-icon input-group__icon-cb input-group__icon-clearable",attrs:{"aria-hidden":"true"},on:{click:function(a){t.clear("passCheck")}}},[t._v("clear")]):t._e()]),t._v(" "),e("div",{staticClass:"input-group__details"},[t.validPass?t._e():e("div",{staticClass:"input-group__messages",staticStyle:{color:"red"}},[t._v("* Mã bí mật là bắt buộc")])])])])],1)],1)],1),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loading,disabled:t.loading},nativeOn:{click:function(a){return t.submitViewDetail(a)}}},[e("v-icon",[t._v("save")]),t._v(" \n            Truy cập hồ sơ\n            "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1),t._v(" "),e("v-btn",{attrs:{color:"red darken-3",flat:"flat",loading:t.loading,disabled:t.loading},on:{click:t.clearDialog},nativeOn:{click:function(a){t.dialogCheckPass=!1}}},[e("v-icon",[t._v("undo")]),t._v(" \n            Thoát\n            "),e("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],1)],1)],1),t._v(" "),e("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:t.dialogError,callback:function(a){t.dialogError=a},expression:"dialogError"}},[e("v-card",[e("v-card-title",{staticClass:"headline"},[t._v("Bạn không có quyền truy cập hồ sơ \n          "),e("span",[t._v(t._s(t.dossierDetail.dossierNo))])]),t._v(" "),e("v-card-actions",[e("v-spacer"),t._v(" "),e("v-btn",{attrs:{color:"green darken-1",flat:""},nativeOn:{click:function(a){t.dialogError=!1}}},[t._v("Đồng ý")])],1)],1)],1)],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0}});
//# sourceMappingURL=3.63e2429faa453812cee0.js.map