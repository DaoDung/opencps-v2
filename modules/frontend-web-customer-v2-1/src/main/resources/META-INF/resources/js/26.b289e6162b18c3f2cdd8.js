webpackJsonp([26],{263:function(t,e,o){var i=o(138)(o(760),o(769),null,null);i.options.__file="/home/hoanganh/Pictures/FrontEnd_Opencps2.1/frontend-opencps-v2.1/onegate_21_fe/src/components/form_xu_ly/TaoTaiLieuKetQua_bk.vue",i.esModule&&Object.keys(i.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] TaoTaiLieuKetQua_bk.vue: functional components are not supported with templates, they should use render functions."),t.exports=i.exports},760:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(36),__WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__),__WEBPACK_IMPORTED_MODULE_1_toastr__=__webpack_require__(142),__WEBPACK_IMPORTED_MODULE_1_toastr___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_toastr__);__webpack_exports__.default={props:{createFiles:{type:Array,default:function(){return[]}},detailDossier:{type:Object,default:function(){}}},watch:{detailDossier:function(t){console.log("watch",t);var e=this;e.thongTinHoSo=t,e.$store.dispatch("loadDossierFiles",t.dossierId).then(function(t){e.dossierFilesItems=t,e.initData()})},createFiles:function(t){var e=this;e.createFiles=t,e.initData()}},data:function(){return{createFiles:[],thongTinHoSo:{},dossierFilesItems:[],valid:!0,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,fileViews:[{dossierFileId:12121,displayName:"THanh phan 1"},{dossierFileId:12122,displayName:"THanh phan 2"}],partView:"",stateView:!1}},computed:{loading:function(){return this.$store.getters.loading}},mounted:function(){var t=this;t.page=1,t.$nextTick(function(){})},methods:{resetCounterTemplate:function(t,e){t.commit,t.state;this.createFiles.forEach(function(t){t.partNo===e.partNo&&(t.eForm?t.count=1:t.count=0)})},recountFileTemplates:function(){var t=this;t.createFiles.forEach(function(e){e.count=0,t.dossierFilesItems.forEach(function(t){e.partNo===t.dossierPartNo&&e.count++})})},initData:function(t){var e=this,o=e.createFiles,i=e.dossierFilesItems;o=e.mergeDossierTemplateVsDossierFiles(o,i),console.log("createFiles++++++MERGER++++file",o),setTimeout(function(t){e.genAllAlpacaForm(o,i),e.recountFileTemplates()},500)},genAllAlpacaForm:function(t,e){var o=this;if(e.length>0){var i=e.filter(function(t){return t.eForm}),a=t.filter(function(t){return t.eForm});i.length>0?i.forEach(function(t){t.eForm&&o.$store.dispatch("loadAlpcaForm",t)}):t.forEach(function(t){t.eForm&&o.showAlpacaJSFORM(t)}),a.length!==i.length&&a.forEach(function(t){-1===i.findIndex(function(e){return t.partNo===e.dossierPartNo})&&o.showAlpacaJSFORM(t)})}else t.forEach(function(t){t.eForm&&o.showAlpacaJSFORM(t)})},postDossierMark:function(t,e){var o=this;t.dossierId=o.thongTinHoSo.dossierId,o.$store.dispatch("postDossierMark",t).then(function(t){}).catch(function(t){})},mergeDossierTemplateVsDossierFiles:function(t,e){return e?t.forEach(function(t){var o=e.find(function(e){return t.partNo===e.dossierPartNo&&t.eForm});o?t.daKhai=!0:!o&&t.eForm&&(t.daKhai=!1)}):t.forEach(function(t){t.eForm&&(t.daKhai=!1)}),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;vm.$store.dispatch("loadFormScript",item).then(function(resScript){vm.$store.dispatch("loadFormData",item).then(function(resData){var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,__WEBPACK_IMPORTED_MODULE_0_jquery___default()("#formAlpaca"+item.partNo).alpaca(formScript)})})},saveAlpacaForm:function(t,e){var o=this,i=o.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo});i?(i.dossierId=o.thongTinHoSo.dossierId,o.$store.dispatch("putAlpacaForm",i).then(function(t){}).catch(function(t){__WEBPACK_IMPORTED_MODULE_1_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(t.dossierId=o.thongTinHoSo.dossierId,o.$store.dispatch("postEform",t).then(function(t){o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t}).catch(function(t){__WEBPACK_IMPORTED_MODULE_1_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})})),o.createFiles[e].daKhai=!0},onDeleteAttackFiles:function(t){var e=this;console.log("delete"),confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?")&&e.dossierFilesItems.forEach(function(o){o.dossierPartNo===t.partNo&&(o.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",o).then(function(o){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)}).catch(function(t){}))})},pickFile:function(t){document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e){var o=this;t.dataItem=e,t.dossierId=o.thongTinHoSo.dossierId,t.dossierTemplateNo=e.templateFileNo,o.$store.dispatch("uploadSingleFile",t).then(function(t){o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t,o.recountFileTemplates()})}).catch(function(t){})},loadAlpcaForm:function(t){var e=this,o=e.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo&&e.eForm});o?e.$store.dispatch("loadAlpcaForm",o):e.createFiles.forEach(function(o){o.eForm&&t.partNo===o.partNo&&e.showAlpacaJSFORM(o)})},deleteSingleFileEform:function(t,e){var o=this;confirm("Bạn có muốn xóa?")&&(o.dossierFilesItems.forEach(function(e){e.dossierPartNo===t.partNo&&e.eForm&&o.$store.dispatch("deleteDossierFile",e).then(function(t){console.log("success!"),o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t,o.recountFileTemplates()})})}),o.createFiles[e].daKhai=!1)},deleteSingleFile:function(t,e){var o=this;confirm("Bạn có muốn xóa?")&&o.$store.dispatch("deleteDossierFile",t).then(function(t){o.$store.dispatch("loadDossierFiles",o.thongTinHoSo.dossierId).then(function(t){o.dossierFilesItems=t,o.recountFileTemplates()})}).catch(function(t){__WEBPACK_IMPORTED_MODULE_1_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})},viewFile:function(t){var e=this,o=this;o.dossierFilesItems.forEach(function(i){i.dossierId=o.thongTinHoSo.dossierId,i.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",i)})},viewFile2:function(t){var e=this;t.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("viewFile",t)},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var o=e.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.partNo});if(!o)return;e.fileViews=o,e.partView=t.partNo,e.stateView=!e.stateView}},changeOtherDossierTemp:function(t){var e=this;e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,partName:t}).then(function(t){e.loadingAddOther=!1,e.dialogAddOtherTemp=!1}).catch(function(t){e.loadingAddOther=!1})},addOtherTemplate:function(){var t=this;t.$refs.form.validate()&&t.changeOtherDossierTemp(t.otherDossierTemplate)}}}},769:function(t,e,o){t.exports={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"taotailieuketqua",staticStyle:{"background-color":"white",width:"100%"}},[o("v-expansion-panel",{staticClass:"expansion-pl"},[o("v-expansion-panel-content",{attrs:{"hide-actions":"",value:"1"}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("div",{staticClass:"background-triangle-small"},[o("v-icon",{attrs:{size:"18",color:"white"}},[t._v("star_rate")])],1),t._v(" Tài liệu kết quả\n        ")]),t._v(" "),o("v-card",t._l(t.createFiles,function(e,i){return o("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[o("v-expansion-panel",{staticClass:"expaned__list__data",class:{no_acction__event:!e.eForm}},[o("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[o("div",{attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[o("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px"}},[o("span",{staticClass:"text-bold mr-2"},[t._v(t._s(i+1)+".")]),t._v(" "),o("span",{on:{click:function(o){t.loadAlpcaForm(e)}}},[t._v(t._s(e.partName)+" "),e.required?o("span",{staticStyle:{color:"red"}},[t._v(" (*)")]):t._e(),t._v(" "),e.eForm?o("i",{staticStyle:{"font-size":"10px",color:"#0d71bb"}},[t._v("(Form trực tuyến)")]):t._e(),t._v(" "),e.eForm?o("i",{staticStyle:{"font-size":"10px",color:"#0d71bb"}},[t._v("("+t._s(e.daKhai?"Đã khai":"Chưa khai ")+")")]):t._e()])])]),t._v(" "),o("v-card",[o("v-card-text",[o("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():o("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e.eForm?o("v-btn",{attrs:{color:"primary"},on:{click:function(o){t.saveAlpacaForm(e,i)}}},[t._v("Lưu lại")]):t._e(),t._v(" "),e.daKhai&&e.eForm?o("v-btn",{attrs:{color:"primary"},on:{click:function(o){t.deleteSingleFileEform(e,i)}}},[t._v("Xóa")]):t._e(),t._v(" "),o("div",{attrs:{id:"formAlpaca"+e.partNo}})],1)],1)],1)],1)],1)],1),t._v(" "),o("div",{staticClass:"absolute__btn group__thanh_phan"},[t.loading?o("content-placeholders",{staticClass:"mt-1"},[o("content-placeholders-text",{attrs:{lines:1}})],1):o("v-layout",{staticClass:"flex__checkbox",attrs:{row:"",wrap:""}},[o("v-flex",{staticClass:"layout wrap",staticStyle:{width:"260px"}},[o("v-radio-group",{attrs:{row:""},on:{change:function(o){t.postDossierMark(e,i)}},model:{value:t.createFiles[i].fileMark,callback:function(e){t.$set(t.createFiles[i],"fileMark",e)},expression:"createFiles[index].fileMark"}},[o("v-radio",{attrs:{value:0}}),t._v(" "),o("v-radio",{attrs:{value:1}}),t._v(" "),o("v-radio",{attrs:{value:2}}),t._v(" "),o("v-radio",{attrs:{value:3}})],1)],1),t._v(" "),o("v-flex",{staticClass:"text-xs-center",staticStyle:{width:"110px",background:"#fff"}},[o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},slot:"activator"},[o("v-badge",[o("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(o){t.onUploadSingleFile(o,e)}}}),t._v(" "),o("v-icon",{attrs:{size:"16",color:"primary"},on:{click:function(o){t.pickFile(e)}}},[t._v("attach_file")])],1)],1),t._v(" "),o("span",[t._v("Tải file lên")])],1),t._v(" "),o("v-tooltip",{attrs:{top:""}},[o("v-btn",{staticClass:"mx-0",staticStyle:{height:"20px",width:"20px"},attrs:{slot:"activator",fab:"",dark:"",small:"",color:"primary"},on:{click:function(o){t.viewFileWithPartNo(e)}},slot:"activator"},[t._v("\n                      "+t._s(e.count)+"\n                    ")]),t._v(" "),o("span",[t._v("Xem")])],1)],1)],1)],1),t._v(" "),e.partNo===t.partView&&t.stateView?o("div",[o("v-layout",{attrs:{row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"",sm12:""}},t._l(t.fileViews,function(e,i){return o("div",[o("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px"}},[o("span",{staticClass:"ml-3",on:{click:function(o){t.viewFile2(e)}}},[t._v(t._s(e.displayName))]),t._v(" "),o("v-btn",{attrs:{icon:"",ripple:""},on:{click:function(o){t.deleteSingleFile(e,i)}}},[o("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])}))],1)],1):t._e()],1)})),t._v(" "),o("div",{staticClass:"absolute-lable",staticStyle:{"font-size":"12px"}},[o("span",[t._v("Không chọn")]),t._v(" "),o("span",[t._v("Bản chính")]),t._v(" "),o("span",[t._v("Bản chụp")]),t._v(" "),o("span",[t._v("Công chứng")])])],1)],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});
//# sourceMappingURL=26.b289e6162b18c3f2cdd8.js.map