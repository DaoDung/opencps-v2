webpackJsonp([13,27],{212:function(t,e,i){var s=i(138)(i(643),i(660),null,null);t.exports=s.exports},241:function(t,e,i){var s=i(138)(i(720),i(725),null,null);t.exports=s.exports},643:function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0});var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__=__webpack_require__(140),__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise__),__WEBPACK_IMPORTED_MODULE_1_jquery__=__webpack_require__(37),__WEBPACK_IMPORTED_MODULE_1_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__),__WEBPACK_IMPORTED_MODULE_2_toastr__=__webpack_require__(143),__WEBPACK_IMPORTED_MODULE_2_toastr___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_toastr__);__webpack_exports__.default={props:{onlyView:{type:Boolean,default:function(){return!1}},id:{type:String,default:function(){return"nm"}},partTypes:{type:Array,default:function(){return[1,3]}},checkInput:{type:Number,default:function(){return 0}}},data:function(){return{dossierTemplateItems:[],dossierMarksItems:[],dossierFilesItems:[],thongTinHoSo:{},valid:!0,stateView:!1,dialogAddOtherTemp:!1,loadingAddOther:!1,otherDossierTemplate:"",sheet:!1,partView:"",dossierFileIdView:"",stateEdit:!1,progressUploadPart:"",dialogPDF:!1,dialogPDFLoading:!0,stateAddFileOther:!1,dossierTemplatesItemSelect:{},fileViews:[],sampleCount:0,fileMarkItems:[{text:"Không có",value:0},{text:"Bản chụp",value:1},{text:"Bản sao",value:2},{text:"Bản gốc",value:3}],fileCheckItems:[{text:"Chưa kiểm tra",value:0},{text:"Đạt",value:1},{text:"Không đạt",value:2}],fileTemplateItems:[]}},computed:{loading:function(){return this.$store.getters.loading},originality:function(){return this.getOriginality()},initDataResource:function(){return this.$store.getters.loadingInitData}},mounted:function(){var t=this;t.page=1,t.$nextTick(function(){})},methods:{resetCounterTemplate:function(t,e){t.commit,t.state;this.dossierTemplateItems.forEach(function(t){t.partNo===e.partNo&&(t.hasForm?t.count=1:t.count=0)})},recountFileTemplates:function(){var t=this;t.dossierTemplateItems.forEach(function(e){e.count=0,t.dossierFilesItems.forEach(function(t){e.partNo!==t.dossierPartNo||t.eForm||e.count++})})},initData:function(t){var e=this,i=[];null!==t.sampleCount&&void 0!==t.sampleCount&&"undefined"!==t.sampleCount&&(e.sampleCount=t.sampleCount),i.push(e.$store.dispatch("loadDossierTemplates",t)),i.push(e.$store.dispatch("loadDossierMark",t)),i.push(e.$store.dispatch("loadDossierFiles",t.dossierId)),i.push(e.$store.dispatch("getServiceInfo",{serviceInfoId:t.serviceCode})),e.thongTinHoSo=t,__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default.a.all(i).then(function(t){var i=t[0],s=t[1],a=t[2],o=[];t[3].fileTemplates&&(Array.isArray(t[3].fileTemplates)?o=t[3].fileTemplates:o.push(t[3].fileTemplates));var r=e.mergeDossierTemplateVsDossierFiles(i,a);r=e.mergeDossierTemplateVsDossierMark(r,s),r=e.mergeDossierTemplateVsFileTemplates(r,o),e.dossierTemplateItems=r,e.dossierFilesItems=a,e.dossierMarksItems=s,e.fileTemplateItems=o,setTimeout(function(t){e.genAllAlpacaForm(a,r),e.recountFileTemplates()},500)}).catch(function(t){})},genAllAlpacaForm:function(t,e){var i=this;if(t.length>0){var s=t.filter(function(t){return t.eForm}),a=e.filter(function(t){return t.hasForm&&i.partTypes.includes(t.partType)});s.length>0?s.forEach(function(t){t.eForm&&i.$store.dispatch("loadAlpcaForm",t)}):e.forEach(function(t){t.hasForm&&i.partTypes.includes(t.partType)&&(t.templateFileNo=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))}),a.length!==s.length&&a.forEach(function(t){-1===s.findIndex(function(e){return t.partNo===e.dossierPartNo})&&(t.templateFileNo=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))})}else e.forEach(function(t){t.hasForm&&i.partTypes.includes(t.partType)&&(t.templateFileNo=i.thongTinHoSo.dossierTemplateNo,i.showAlpacaJSFORM(t))})},postDossierMark:function(t,e){var i=this;t.dossierId=i.thongTinHoSo.dossierId,i.$store.dispatch("postDossierMark",t).then(function(t){}).catch(function(t){})},mergeDossierTemplateVsDossierFiles:function(t,e){var i=this;return 0!==e.length?t.forEach(function(t){var s=e.find(function(e){return t.partNo===e.dossierPartNo&&i.partTypes.includes(t.partType)&&e.eForm});s?t.daKhai=!0:!s&&t.hasForm&&(t.daKhai=!1)}):t.forEach(function(t){t.hasForm&&(t.daKhai=!1)}),t},mergeDossierTemplateVsDossierMark:function(t,e){return 0!==e.length?t.map(function(t){t.count=0,t.stateEditFileCheck=!1;var i=e.find(function(e){return e.dossierPartNo===t.partNo});return null!==i&&void 0!==i?(t.fileMark=i.fileMark,t.fileComment=i.fileComment,t.fileCheck=i.fileCheck):(t.fileMark=0,t.fileComment="",t.fileCheck=0),t}):t&&t.forEach(function(t){t.stateEditFileCheck=!1,t.count=0,t.fileMark=0,t.fileComment="",t.fileCheck=0,t.stateEditFileCheck=!1}),t},mergeDossierTemplateVsFileTemplates:function(t,e){return 0!==e.length?t.map(function(t){var i=e.find(function(e){return e.fileTemplateNo===t.fileTemplateNo});return t.hasFileTemp=null!==i&&void 0!==i?i.fileTemplateNo:"",t}):t&&t.forEach(function(t){t.hasFileTemp=""}),t},showAlpacaJSFORM:function showAlpacaJSFORM(item){var vm=this;item.dossierId=vm.thongTinHoSo.dossierId,vm.$store.dispatch("loadFormScript",item).then(function(resScript){vm.$store.dispatch("loadFormData",item).then(function(resData){__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#formAlpaca"+item.partNo+vm.id).empty();var formScript,formData;formScript=resScript?eval("("+resScript+")"):{},formData=resData?eval("("+resData+")"):{},formScript.data=formData,__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#formAlpaca"+item.partNo+vm.id).alpaca(formScript)})})},saveAlpacaForm:function(t,e){var i=this,s=i.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo&&e.eForm});s?(s.dossierId=i.thongTinHoSo.dossierId,s.id=i.id,i.$store.dispatch("putAlpacaForm",s).then(function(t){}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})):(t.dossierId=i.thongTinHoSo.dossierId,t.id=i.id,i.$store.dispatch("postEform",t).then(function(t){i.dossierTemplateItems[e].daKhai=!0,i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(t){i.dossierFilesItems=t}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},onDeleteAttackFiles:function(t){var e=this;confirm("Bạn có muốn xóa toàn bộ file trong thành phần hồ sơ này?")&&e.dossierFilesItems.forEach(function(i){i.dossierPartNo===t.partNo&&(i.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("deleteAttackFiles",i).then(function(i){e.resetCounterTemplate(t),e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId)}).catch(function(t){}))})},pickFile:function(t){this.stateAddFileOther=!1,document.getElementById("file"+t.partNo).click()},onUploadSingleFile:function(t,e){var i=this;if(i.dossierTemplatesItemSelect=e,i.progressUploadPart=e.partNo,e.dossierId=i.thongTinHoSo.dossierId,e.dossierTemplateNo=i.thongTinHoSo.dossierTemplateNo,3!==e.partType)i.$store.dispatch("uploadSingleFile",e).then(function(t){i.progressUploadPart="",i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(t){i.dossierFilesItems=t,i.recountFileTemplates()})}).catch(function(t){i.progressUploadPart=""});else{if(0===__WEBPACK_IMPORTED_MODULE_1_jquery___default()("#file"+e.partNo)[0].files.length)return void(i.progressUploadPart="");i.partView=e.partNo,i.stateView=!0,i.dialogAddOtherTemp=!0}},loadAlpcaForm:function(t){var e=this,i=e.dossierFilesItems.find(function(e){return e.dossierPartNo===t.partNo&&e.eForm});i?(i.id=e.id,e.$store.dispatch("loadAlpcaForm",i)):e.dossierTemplateItems.forEach(function(i){i.hasForm&&t.partNo===i.partNo&&(i.templateFileNo=e.thongTinHoSo.dossierTemplateNo,e.showAlpacaJSFORM(i))})},deleteSingleFileEform:function(t,e){var i=this;confirm("Bạn có muốn xóa?")&&(i.dossierFilesItems.forEach(function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e.dossierId=i.thongTinHoSo.dossierId,i.$store.dispatch("deleteDossierFile",e).then(function(e){i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(e){i.dossierFilesItems=e,i.recountFileTemplates();var s=i.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.partNo&&!e.eForm});s&&(i.fileViews=s)})}))}),i.dossierTemplateItems[e].daKhai=!1)},previewFileEfom:function(t,e){var i=this;i.dossierFilesItems.forEach(function(e){e.dossierPartNo===t.partNo&&e.eForm&&(e.dossierId=i.thongTinHoSo.dossierId,i.dialogPDFLoading=!0,i.dialogPDF=!0,i.onlyView?i.$store.dispatch("viewFile",e).then(function(t){i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t}):(e.id=i.id,i.$store.dispatch("putAlpacaForm",e).then(function(t){setTimeout(function(){i.$store.dispatch("viewFile",e).then(function(t){i.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+i.id).src=t})},1e3)}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")})))})},deleteSingleFile:function(t,e){var i=this;confirm("Bạn có muốn xóa?")&&(t.dossierId=i.thongTinHoSo.dossierId,i.$store.dispatch("deleteDossierFile",t).then(function(s){i.fileViews.splice(e,1),i.stateView=!0,i.partView=t.dossierPartNo,i.$store.dispatch("loadDossierFiles",i.thongTinHoSo.dossierId).then(function(t){i.dossierFilesItems=t,i.recountFileTemplates()})}).catch(function(t){__WEBPACK_IMPORTED_MODULE_2_toastr___default.a.error("Yêu cầu của bạn được thực hiện thất bại.")}))},viewFile:function(t){var e=this,i=this;i.dossierFilesItems.forEach(function(s){s.dossierId=i.thongTinHoSo.dossierId,s.dossierPartNo===t.partNo&&e.$store.dispatch("viewFile",s)})},checkPartType3:function(){var t=this;if(0!==t.dossierTemplateItems.length)for(var e=0;e<t.dossierTemplateItems.length;e++)if(3===t.dossierTemplateItems[e].partType)return!0;return!1},viewFile2:function(t){var e=this;if(0!==t.fileSize)if("doc"===t.fileType||"docx"===t.fileType||"xsl"===t.fileType||"zip"===t.fileType||"rar"===t.fileType){var i=e.initDataResource.dossierApi+"/"+e.thongTinHoSo.dossierId+"/files/"+t.referenceUid;window.open(i)}else e.dialogPDFLoading=!0,e.dialogPDF=!0,t.dossierId=e.thongTinHoSo.dossierId,e.$store.dispatch("viewFile",t).then(function(t){e.dialogPDFLoading=!1,document.getElementById("dialogPDFPreview"+e.id).src=t})},viewFileWithPartNo:function(t){var e=this;if(e.dossierFilesItems){var i=e.dossierFilesItems.filter(function(e){return e.dossierPartNo===t.partNo&&!e.eForm});if(!i)return;e.fileViews=i,e.partView!==t.partNo?(e.stateView=!0,e.partView=t.partNo):(e.stateView=!e.stateView,e.partView=t.partNo)}},saveMark:function(){var t=this;t.dossierTemplateItems&&t.dossierTemplateItems.forEach(function(e,i){1===e.partType&&(e.dossierId=t.thongTinHoSo.dossierId,t.$store.dispatch("postDossierMark",e))})},changeFileMark:function(t,e){var i=this,s=i.dossierTemplateItems[e];s.dossierId=i.thongTinHoSo.dossierId,s.fileMark=t,s.checkInput=i.checkInput,i.$store.dispatch("postDossierMark",s),i.dossierTemplateItems[e].fileMark=t},changeFileCheck:function(t,e){var i=this,s=i.dossierTemplateItems[e];if(s.dossierId=i.thongTinHoSo.dossierId,s.fileCheck=t,s.checkInput=i.checkInput,2===t)return void(s.stateEditFileCheck=!0);s.fileComment="",i.$store.dispatch("postDossierMark",s),i.dossierTemplateItems[e].fileCheck=t},changeFileComment:function(t,e){var i=this;null!==t.fileComment&&void 0!==t.fileComment&&""!==t.fileComment&&(t.dossierId=i.thongTinHoSo.dossierId,t.fileComment=t.fileComment,t.checkInput=i.checkInput,t.stateEditFileCheck=!t.stateEditFileCheck,i.$store.dispatch("postDossierMark",t),i.dossierTemplateItems[e].fileComment=t.fileComment)},checkStyle:function(t){var e=this;if(1===e.checkInput)return"calc(100% - 140px)";var i=0;return 1===e.originality||1!==t.partType||e.thongTinHoSo.online||1===e.checkInput||(i+=140),t.fileCheck>0&&(i+=20),e.onlyView||(i+=90),"calc(100% - "+i+"px)"},changeOtherDossierTemp:function(t){var e=this;if(3===e.originality&&e.stateAddFileOther)e.loadingAddOther=!0,e.$store.dispatch("uploadSingleOtherFile",{dossierId:e.thongTinHoSo.dossierId,displayName:t,partNo:e.dossierTemplatesItemSelect.partNo}).then(function(t){e.loadingAddOther=!1,e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then(function(t){e.dossierFilesItems=t})}).catch(function(t){e.loadingAddOther=!1});else{var i=e.dossierTemplatesItemSelect;i.dossierId=e.thongTinHoSo.dossierId,i.displayName=t,i.dossierTemplateNo=e.thongTinHoSo.dossierTemplateNo,e.$store.dispatch("uploadSingleFile",i).then(function(t){e.progressUploadPart="",e.dialogAddOtherTemp=!1,e.$store.dispatch("loadDossierFiles",e.thongTinHoSo.dossierId).then(function(t){if(e.dossierFilesItems=t,e.recountFileTemplates(),e.stateView&&e.dossierFilesItems){var i=e.dossierFilesItems.filter(function(t){return t.dossierPartNo===e.dossierTemplatesItemSelect.partNo&&!t.eForm});i&&(e.fileViews=i)}})}).catch(function(t){e.progressUploadPart=""})}},downloadFileTemplate:function(t,e){var i=this;if(i.fileTemplateItems.length>0){var s=i.fileTemplateItems.find(function(e){return t.fileTemplateNo===e.fileTemplateNo});if(s){var a=i.initDataResource.serviceInfoApi+"/"+s.serviceCode+"/filetemplates/"+s.fileTemplateNo;window.open(a)}}},addOtherTemplate:function(){var t=this;t.$refs.form.validate()&&t.changeOtherDossierTemp(t.otherDossierTemplate)},editDisplayName:function(t,e){var i=this;i.dossierFileIdView!==t.dossierFileId?(i.dossierFileIdView=t.dossierFileId,i.stateEdit=!0):(i.dossierFileIdView=t.dossierFileId,i.stateEdit=!i.stateEdit)},cancelDialog:function(){var t=this;t.dialogAddOtherTemp=!1,t.progressUploadPart=""},addFileOther:function(t){var e=this;e.dialogAddOtherTemp=!0,e.stateAddFileOther=!0,e.dossierTemplatesItemSelect=t},changeDisplayName:function(t,e){var i=this,s={dossierId:i.thongTinHoSo.dossierId,value:value};i.$store.dispatch("changeDisplayNameFile",s).then(function(t){i.fileViews[e].displayName=t.displayName,i.stateEdit=!1}).catch(function(t){})}}}},660:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("v-card",[t._l(t.dossierTemplateItems,function(e,s){return t.partTypes.includes(e.partType)?i("div",{key:e.partNo,staticClass:"form_alpaca",staticStyle:{position:"relative"}},[i("v-expansion-panel",{staticClass:"expaned__list__data"},[i("v-expansion-panel-content",{attrs:{"hide-actions":"",value:!1}},[i("div",{staticStyle:{"background-color":"#fff"},attrs:{slot:"header"},on:{click:function(e){t.stateView=!1}},slot:"header"},[i("div",{staticStyle:{"align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px"},style:{width:t.checkStyle(e)}},[i("div",{staticClass:"mr-2",staticStyle:{"min-width":"18px",display:"flex","min-height":"38px"},on:{click:function(i){t.loadAlpcaForm(e)}}},[i("div",{staticClass:"header__tphs"},[i("span",{staticClass:"text-bold"},[t._v(t._s(s+1)+".")]),t._v("  ")]),t._v(" "),i("div",{staticClass:"header__tphs"},[t._v("\n                  "+t._s(e.partName)+" "),e.required?i("span",{staticStyle:{color:"red"}},[t._v(" (*) ")]):t._e(),t._v("\n                    \n                  "),e.hasForm&&e.daKhai?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-text-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator","aria-hidden":"true"},slot:"activator"}),t._v(" "),i("span",[t._v("Biểu mẫu trực tuyến (Đã khai)")])]):t._e(),t._v(" "),e.hasForm&&!e.daKhai?i("v-tooltip",{attrs:{top:""}},[i("i",{staticClass:"fa fa-file-o",staticStyle:{color:"#0d71bb","font-size":"13px"},attrs:{slot:"activator"},slot:"activator"}),t._v(" "),i("span",[t._v("Biểu mẫu trực tuyến (Chưa khai)")])]):t._e(),t._v("\n                    \n                  "),!e.hasForm&&e.hasFileTemp?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticStyle:{color:"#0d71bb"},attrs:{slot:"activator",size:"16",color:"primary"},on:{click:function(i){i.stopPropagation(),t.downloadFileTemplate(e,s)}},slot:"activator"},[t._v("save_alt")]),t._v(" "),i("span",[t._v("Biểu mẫu điền thủ công")])],1):t._e()],1)]),t._v(" "),i("div",{staticStyle:{display:"flex"}},[1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?i("v-text-field",{attrs:{placeholder:"Nhập lý do",rules:[function(t){return!!t||"Bạn phải nhập lý do trước khi gửi"}],required:""},model:{value:e.fileComment,callback:function(i){t.$set(e,"fileComment",i)},expression:"item.fileComment"}}):t._e(),t._v(" "),1===t.checkInput&&2===e.fileCheck&&e.stateEditFileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){i.stopPropagation(),t.changeFileComment(e,s)}},slot:"activator"},[i("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("send")])],1),t._v(" "),i("span",[t._v("Gửi")])],1):t._e()],1),t._v(" "),e.fileComment&&!e.stateEditFileCheck?i("i",{staticStyle:{"font-size":"10px",color:"#0d71bb","margin-left":"10px"}},[t._v(t._s(e.fileComment))]):t._e(),t._v(" "),e.fileComment&&!e.stateEditFileCheck&&1===t.checkInput?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticStyle:{"font-size":"13px",color:"#0d71bb","margin-left":"10px",cursor:"pointer"},attrs:{slot:"activator"},on:{click:function(t){t.stopPropagation(),e.stateEditFileCheck=!e.stateEditFileCheck}},slot:"activator"},[t._v("edit")]),t._v(" "),i("span",[t._v("Chỉnh sửa ý kiến")])],1):t._e(),t._v(" "),t._l(t.dossierFilesItems,function(s,a){return e.partNo!==s.dossierPartNo||s.eForm?t._e():i("div",{key:a},[i("div",{staticStyle:{width:"calc(100% - 370px)",display:"flex","align-items":"center","min-height":"38px",background:"#fff","padding-left":"15px","font-size":"12px"}},[i("span",{staticClass:"ml-3",staticStyle:{cursor:"pointer"},on:{click:function(e){e.stopPropagation(),t.viewFile2(s)}}},[0!==s.fileSize?i("v-icon",[t._v("attach_file")]):t._e(),t._v("\n                    "+t._s(s.displayName)+" - \n                    "),i("i",[t._v(t._s(s.modifiedDate))])],1),t._v(" "),t.onlyView?t._e():i("v-btn",{staticClass:"mx-0 my-0",attrs:{icon:"",ripple:""},on:{click:function(e){e.stopPropagation(),t.deleteSingleFile(s,a)}}},[i("v-icon",{staticStyle:{color:"red"}},[t._v("delete_outline")])],1)],1)])})],2)]),t._v(" "),e.hasForm?i("v-card",[i("v-card-text",{staticStyle:{"background-color":"rgba(244, 247, 213, 0.19)"}},[i("v-layout",{attrs:{wrap:""}},[t.stateView?t._e():i("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[e.hasForm&&!t.onlyView&&1!==t.checkInput?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.saveAlpacaForm(e,s)}}},[t._v("Lưu lại")]):t._e(),t._v(" "),e.daKhai&&e.hasForm&&!t.onlyView&&1!==t.checkInput?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.deleteSingleFileEform(e,s)}}},[t._v("Xóa")]):t._e(),t._v(" "),e.daKhai&&e.hasForm?i("v-btn",{attrs:{color:"primary"},on:{click:function(i){t.previewFileEfom(e,s)}}},[t._v("Preview")]):t._e(),t._v(" "),!t.onlyView||e.daKhai?i("div",{class:{no_acction__event:t.onlyView},attrs:{id:"formAlpaca"+e.partNo+t.id}}):t._e()],1)],1)],1)],1):t._e()],1)],1),t._v(" "),i("div",{staticClass:"absolute__btn group__thanh_phan pr-3 mr-1"},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-layout",{attrs:{row:"",wrap:""}},[1===t.originality||1!==e.partType||t.thongTinHoSo.online||1===t.checkInput?t._e():i("v-flex",{staticClass:"layout wrap",staticStyle:{width:"110px"}},[i("v-select",{attrs:{items:t.fileMarkItems,disabled:t.onlyView},on:{change:function(e){t.changeFileMark(e,s)}},model:{value:t.dossierTemplateItems[s].fileMark,callback:function(e){t.$set(t.dossierTemplateItems[s],"fileMark",e)},expression:"dossierTemplateItems[index].fileMark"}})],1),t._v(" "),1===t.checkInput?i("v-flex",{staticClass:"layout wrap",staticStyle:{width:"120px"}},[i("v-select",{attrs:{items:t.fileCheckItems,"item-text":"text","item-value":"value"},on:{change:function(e){t.changeFileCheck(e,s)}},model:{value:t.dossierTemplateItems[s].fileCheck,callback:function(e){t.$set(t.dossierTemplateItems[s],"fileCheck",e)},expression:"dossierTemplateItems[index].fileCheck"}})],1):e.fileCheck>0?i("v-flex",{staticClass:"layout wrap",staticStyle:{width:"20px","align-items":"center","margin-left":"10px"}},[1===e.fileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("done")]),t._v(" "),i("span",[t._v("Đạt")])],1):2===e.fileCheck?i("v-tooltip",{attrs:{top:""}},[i("v-icon",{staticClass:"mx-0",attrs:{slot:"activator",size:"16",color:"primary"},slot:"activator"},[t._v("close")]),t._v(" "),i("span",[t._v("Không đạt")])],1):t._e()],1):t._e(),t._v(" "),1!==t.checkInput?i("v-flex",{class:{"text-xs-center":!t.onlyView,"text-xs-right":t.onlyView},style:{width:t.onlyView?"auto":"90px"}},[i("input",{staticStyle:{display:"none"},attrs:{type:"file",id:"file"+e.partNo},on:{change:function(i){t.onUploadSingleFile(i,e)}}}),t._v(" "),3!==e.partType||3!==t.originality||t.onlyView?t._e():i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.addFileOther(e)}},slot:"activator"},[i("v-icon",{staticClass:"mx-0",attrs:{size:"16",color:"primary"}},[t._v("add")])],1),t._v(" "),i("span",[t._v("Thêm giấy tờ khác")])],1),t._v(" "),t.progressUploadPart===e.partNo?i("v-progress-circular",{attrs:{width:2,size:25,color:"green",indeterminate:""}}):t.progressUploadPart===e.partNo||t.onlyView?t._e():i("v-tooltip",{attrs:{top:""}},[i("v-btn",{staticClass:"mx-0 my-0",attrs:{slot:"activator",icon:""},on:{click:function(i){t.pickFile(e)}},slot:"activator"},[i("v-badge",[i("v-icon",{attrs:{size:"16",color:"primary"}},[t._v("cloud_upload")])],1)],1),t._v(" "),i("span",[t._v("Tải file lên")])],1)],1):t._e()],1)],1)],1):t._e()}),t._v(" "),i("v-dialog",{attrs:{"max-width":"400",transition:"fade-transition",persistent:""},model:{value:t.dialogAddOtherTemp,callback:function(e){t.dialogAddOtherTemp=e},expression:"dialogAddOtherTemp"}},[i("v-card",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-card-title",{staticClass:"headline"},[t._v("Tên giấy tờ")]),t._v(" "),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[i("v-icon",[t._v("clear")])],1),t._v(" "),t.loadingAddOther?i("v-progress-linear",{staticClass:"my-0",attrs:{indeterminate:!0}}):t._e(),t._v(" "),i("v-card-text",{staticClass:"pb-0 pt-4"},[i("v-layout",{attrs:{wrap:""}},[i("v-flex",{staticClass:"px-2 pb-3",attrs:{xs12:""}},[i("v-text-field",{attrs:{label:"Tên giấy tờ:",rules:[function(t){return!!t||"Bạn phải điền tên giấy tờ."}],required:""},model:{value:t.otherDossierTemplate,callback:function(e){t.otherDossierTemplate=e},expression:"otherDossierTemplate"}})],1)],1)],1),t._v(" "),i("v-card-actions",[i("v-spacer"),t._v(" "),i("v-btn",{attrs:{color:"red darken-3",flat:"flat"},nativeOn:{click:function(e){return t.cancelDialog(e)}}},[t._v("\n              Quay lại\n            ")]),t._v(" "),i("v-btn",{attrs:{color:"primary",flat:"flat",loading:t.loadingAddOther},nativeOn:{click:function(e){return t.addOtherTemplate(e)}}},[t._v("\n            Đồng ý\n            "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])])],1)],1)],1)],1)],2),t._v(" "),i("v-dialog",{staticStyle:{overflow:"hidden"},attrs:{"max-width":"900",transition:"fade-transition"},model:{value:t.dialogPDF,callback:function(e){t.dialogPDF=e},expression:"dialogPDF"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("File đính kèm")]),t._v(" "),i("v-btn",{staticClass:"mx-0 my-0 absolute__btn_panel mr-2",attrs:{icon:"",dark:""},nativeOn:{click:function(e){t.dialogPDF=!1}}},[i("v-icon",[t._v("clear")])],1),t._v(" "),t.dialogPDFLoading?i("div",{staticStyle:{"min-height":"600px","text-align":"center",margin:"auto",padding:"25%"}},[i("v-progress-circular",{attrs:{size:100,width:1,color:"primary",indeterminate:""}})],1):t._e(),t._v(" "),i("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.dialogPDFLoading,expression:"!dialogPDFLoading"}],staticStyle:{overflow:"auto","min-height":"600px"},attrs:{id:"dialogPDFPreview"+t.id,src:"",type:"application/pdf",width:"100%",height:"100%",frameborder:"0"}})],1)],1)],1)},staticRenderFns:[]}},720:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(140),a=i.n(s),o=i(38),r=i(212),n=i.n(r);e.default={props:["index","id"],data:function(){return{dialog_addTHPHS:!1,loadingAction:!1,thongTinChiTietHoSo:{},btnDossierDynamics:[],visibleBtnNextAction:!0}},computed:{loading:function(){return this.$store.getters.loading}},components:{"thanh-phan-ho-so":n.a},created:function(){var t=this;t.initData(t.id),t.getNextActions(t.id)},watch:{},methods:{initData:function(t){var e=this;e.$store.dispatch("getDetailDossier",t).then(function(t){e.thongTinChiTietHoSo=t,e.$refs.thanhphanhoso.initData(t)})},goBack:function(){window.history.back()},getNextActions:function(t){var e=this,i={dossierId:t};e.$store.dispatch("pullNextactions",i).then(function(t){e.btnDossierDynamics=t})},nextAction:function(t,e){var i=this;i.$store.commit("setPrintPH",!1);var s=this.$refs.thanhphanhoso.dossierTemplateItems,r=i.$refs.thanhphanhoso.dossierFilesItems,n=s,l=[],c=[];n&&(n.forEach(function(t,e){1===t.partType&&(t.dossierId=i.thongTinChiTietHoSo.dossierId,c.push(i.$store.dispatch("postDossierMark",t)))}),0!==r.length?r.forEach(function(t,e){t.eForm&&(t.dossierId=i.thongTinChiTietHoSo.dossierId,l.push(i.$store.dispatch("putAlpacaForm",t)))}):n.forEach(function(t,e){1===t.partType&&t.hasForm&&(t.dossierId=i.thongTinChiTietHoSo.dossierId,l.push(i.$store.dispatch("postEform",t)))})),a.a.all(c).then(function(t){}).catch(function(t){}),a.a.all(l).then(function(e){var s={dossierId:i.thongTinChiTietHoSo.dossierId,actionCode:t.actionCode},a=i.$router.history.current.query;i.loadingActionProcess=!0,i.$store.dispatch("processDossierRouter",s).then(function(t){i.visibleBtnNextAction=!1,o.a.push({path:i.$router.history.current.path,query:{recount:Math.floor(100*Math.random())+1,renew:Math.floor(100*Math.random())+1,q:a.q}})})}).catch(function(t){})}}}},725:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"row-header"},[i("div",{staticClass:"background-triangle-big"},[t._v(" HOÀN THIỆN BỔ SUNG HỒ SƠ ")]),t._v(" "),i("div",{staticClass:"layout row wrap header_tools row-blue"},[i("div",{staticClass:"flex xs8 sm10 pl-3 text-ellipsis text-bold"},[t._v("\n        "+t._s(t.thongTinChiTietHoSo.serviceName)+"\n      ")]),t._v(" "),i("div",{staticClass:"flex xs4 sm2 text-right",staticStyle:{"margin-left":"auto"}},[i("v-btn",{staticClass:"my-0 mx-0 btn-border-left",attrs:{flat:"","active-class":"temp_active"},on:{click:t.goBack}},[t._v("\n        Quay lại  \n          "),i("v-icon",{attrs:{size:"16"}},[t._v("undo")])],1)],1)])]),t._v(" "),i("v-expansion-panel",{staticClass:"expansion-p0",attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v("I. ")]),t._v("THÔNG TIN HỒ SƠ\n      ")]),t._v(" "),i("v-card",{staticClass:"mb-2"},[i("v-card-text",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Loại hồ sơ: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[i("v-chip",{staticClass:"pl-0 mx-0 my-0",attrs:{small:""}},[t._v(" Hồ sơ trực tuyến ")])],1)],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Mã hồ sơ: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.dossierIdCTN))])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Ngày tiếp nhận: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.receiveDate))])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Chủ hồ sơ: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantName))])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Địa chỉ: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm10:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.address))])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Người nộp: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.delegateName))])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm2:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):i("v-subheader",{staticClass:"pl-0 text-header"},[t._v("Số CMND: ")])],1),t._v(" "),i("v-flex",{attrs:{xs12:"",sm4:""}},[t.loading?i("content-placeholders",{staticClass:"mt-1"},[i("content-placeholders-text",{attrs:{lines:1}})],1):t._e(),t._v(" "),i("v-subheader",{staticClass:"pl-0 text-header header-text-field"},[t._v(t._s(t.thongTinChiTietHoSo.applicantIdNo))])],1)],1)],1)],1)],1)],1),t._v(" "),i("v-expansion-panel",{staticClass:"expansion-p0",staticStyle:{position:"relative"},attrs:{expand:""}},[i("v-expansion-panel-content",{attrs:{value:!0}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("div",{staticClass:"background-triangle-small"},[t._v("II. ")]),t._v("THÀNH PHẦN HỒ SƠ\n      ")]),t._v(" "),i("thanh-phan-ho-so",{ref:"thanhphanhoso"})],1)],1),t._v(" "),i("div",{staticClass:"text-center mt-2"},[t._l(t.btnDossierDynamics,function(e,s){return t.visibleBtnNextAction?i("v-btn",{key:s,attrs:{color:"primary"},on:{click:function(i){t.nextAction(e,s)}}},[t._v("\n      "+t._s(e.actionName)+"\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])]):t._e()}),t._v(" "),i("v-btn",{attrs:{color:"primary",loading:t.loadingAction,disabled:t.loadingAction},nativeOn:{click:function(e){return t.goBack(e)}}},[i("v-icon",[t._v("undo")]),t._v("  \n      Quay lại\n      "),i("span",{attrs:{slot:"loader"},slot:"loader"},[t._v("Loading...")])],1)],2)],1)},staticRenderFns:[]}}});
//# sourceMappingURL=13.8a230b1192e803eb104b.js.map